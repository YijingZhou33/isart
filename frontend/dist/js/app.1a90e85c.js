(function(){"use strict";var e={3722:function(e,t,l){var a=l(9963),s=l(6252);function i(e,t,l,a,i,o){const n=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(n)}var o={name:"App",mounted(){document.title="isart"}},n=l(3744);const u=(0,n.Z)(o,[["render",i]]);var r=u,c=(l(4926),l(4996)),d=(l(4415),l(3636)),p=l(7810),m=l(9417),f=l(2201);function g(e,t,l,a,i,o){const n=(0,s.up)("Navbar"),u=(0,s.up)("Headline"),r=(0,s.up)("Footer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n),(0,s.Wm)(u),(0,s.Wm)(r)],64)}l(7658);var h=l(3577),w=l(2262),v=l.p+"img/radiotherapy.2b239afe.png";const b=e=>((0,s.dD)("data-v-1d6f3257"),e=e(),(0,s.Cn)(),e),y={class:"navbar"},_={class:"navbar-brand"},k=b((()=>(0,s._)("img",{src:v,width:"45"},null,-1))),S={class:"navbar-list"},W=["onClick"],x={class:"mr-2 text-sm"};var q={__name:"Navbar",setup(e){const t="iSART",l=[{name:"Home",path:"/",icon:"fa-home"},{name:"Login",path:"/login",icon:"fa-user"},{name:"Sign up",path:"/signup",icon:"fa-user-pen"},{name:"Introduction",path:"#about",icon:"fa-file"},{name:"About Us",path:"#about",icon:"fa-magnifying-glass"}];let a=(0,w.iH)(""),i=(0,w.iH)(!1),o=(0,w.iH)("");const n=(0,f.tv)(),u=e=>{n.push(e)};(0,s.bv)((()=>{o.value=document.body.clientWidth,a.value=window.location.pathname,window.onresize=()=>(()=>{o.value=document.body.clientWidth})()}));const r=()=>{i.value=!i.value};return(e,n)=>{const c=(0,s.up)("router-link"),d=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("main",y,[(0,s._)("section",_,[k,(0,s.Wm)(c,{to:"/"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"navbar-title"},(0,h.zw)(t))])),_:1}),(0,s._)("button",{onClick:r,class:"active:scale-95 duration-300 md:hidden",type:"button"},[(0,s.Wm)(d,{icon:"fa-solid fa-bars",size:"lg",inverse:""})])]),(0,s._)("section",{class:(0,h.C_)([(0,w.SU)(o)>=768||(0,w.SU)(o)<768&&(0,w.SU)(i)?"right-0":"-right-full","navbar-menu"])},[(0,s._)("ul",S,[(0,s._)("span",{onClick:r,class:"md:hidden"},[(0,s.Wm)(d,{icon:"fa-solid fa-xmark",inverse:""})]),((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(l,(({name:e,path:t,icon:l})=>(0,s._)("li",{key:e,class:(0,h.C_)([(0,w.SU)(a)===t?"border-b-4 border-pink-300":"","text-gray-50 duration-300"])},[(0,s._)("a",{onClick:e=>u(t),class:"cursor-pointer font-light"},[(0,s._)("span",x,[(0,s.Wm)(d,{icon:`fa-solid ${l}`},null,8,["icon"])]),(0,s.Uk)(" "+(0,h.zw)(e),1)],8,W)],2))),64))])],2)])}}};const U=(0,n.Z)(q,[["__scopeId","data-v-1d6f3257"]]);var I=U,C=l.p+"img/x-ray.a8b203ac.png";const F=e=>((0,s.dD)("data-v-cd7096ea"),e=e(),(0,s.Cn)(),e),H={class:"section"},P={class:"main"},j=F((()=>(0,s._)("img",{src:C,class:"hero-image"},null,-1))),z={class:"md:w-5/12"},V={class:"title"},T={class:"description"},D={class:"button"},M={class:"button-text"};var R={__name:"Headline",setup(e){const t={title:"iSART",signupPath:"/signup",description:"iSART aims to promote patient safety with proactive learning about ways that can go wrong (failure modes: FMs) in radiotherapy and facilitate the conduct of proactive risk assessment.",button:"Sign up now"};return(e,l)=>{const a=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("section",H,[(0,s._)("main",P,[j,(0,s._)("section",z,[(0,s._)("div",V,(0,h.zw)(t.title),1),(0,s._)("p",T,(0,h.zw)(t.description),1),(0,s.Wm)(a,{to:t.signupPath},{default:(0,s.w5)((()=>[(0,s._)("a",D,[(0,s._)("span",M,(0,h.zw)(t.button),1)])])),_:1},8,["to"])])])])}}};const A=(0,n.Z)(R,[["__scopeId","data-v-cd7096ea"]]);var E=A;const B=e=>((0,s.dD)("data-v-254d4080"),e=e(),(0,s.Cn)(),e),N={class:"section"},O={class:"text-gray-100"},Y={class:"footer-container"},L={class:"md:w-6/12"},Z={class:"footer-title"},$={class:"font-light"},K={class:"md:w-6/12"},J={class:"footer-title"},G={class:"font-light"},X={class:"mt-2"},Q=B((()=>(0,s._)("span",{class:"mr-2"},null,-1))),ee=["href"],te={class:"copyright"},le=["innerHTML"];var ae={__name:"Footer",setup(e){const t={leftCol:{title:"IMPORTANT NOTE",description:"The FMs library should be used thoroughly as an advisory tool and not as a ready-made product. Every department functions under its own workflow, protocols, and safety barriers which lead every risk assessment study."},rightCol:{title:"Lorem ipsum dolor sit amet consectetur",description:"The program is a collaboration of the University of West Attica in Athens and Vrije University in Amsterdam for the fulfillment of a PhD and master's degree."},contact:[{detail:"isartcontact@gmail.com",icon:"fa-envelope"}],copyright:{description:"All rights reserved.",icon:"&copy;",year:"2022"}};return(e,l)=>{const a=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("section",N,[(0,s._)("footer",O,[(0,s._)("section",Y,[(0,s._)("section",L,[(0,s._)("div",Z,(0,h.zw)(t.leftCol.title),1),(0,s._)("p",$,(0,h.zw)(t.leftCol.description),1)]),(0,s._)("section",K,[(0,s._)("div",J,(0,h.zw)(t.rightCol.title),1),(0,s._)("p",G,(0,h.zw)(t.rightCol.description),1),(0,s._)("ul",X,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.contact,(({detail:e,icon:t})=>((0,s.wg)(),(0,s.iD)("li",{key:e},[(0,s.Wm)(a,{icon:`fa-solid ${t}`,size:"lg"},null,8,["icon"]),Q,(0,s._)("a",{href:"mailto:"+e,class:"email"},(0,h.zw)(e),9,ee)])))),128))])])]),(0,s._)("section",te,[(0,s.Uk)((0,h.zw)(t.copyright.description)+" ",1),(0,s._)("span",{innerHTML:t.copyright.icon},null,8,le),(0,s.Uk)(" "+(0,h.zw)(t.copyright.year),1)])])])}}};const se=(0,n.Z)(ae,[["__scopeId","data-v-254d4080"]]);var ie=se,oe={name:"Home",components:{Navbar:I,Headline:E,Footer:ie}};const ne=(0,n.Z)(oe,[["render",g]]);var ue=ne,re=l.p+"img/doctor1.31e085ed.png",ce=l(5781),de=l(594),pe=l(1348),me=l.p+"img/forgot-password.a9f84b3a.png";const fe={class:"dialog-title"},ge={class:"dialog-image-container"};var he={__name:"ForgotPasswordDialog",props:{forgotPasswordDialogVisible:{type:Boolean,default:!1}},setup(e){const t=e,{forgotPasswordDialogVisible:l}=(0,w.BK)(t);let a=(0,w.iH)(!1);(0,s.YP)(l,(()=>{a.value=!a.value}));const i={title:"Forgot Your Password?",primaryButton:"Send Email",secondaryButton:"Reset"},o={description:"Please enter your register email address to receive reset information",emailField:{name:"Email",placeholder:"Please enter email address"}},n=(0,w.qj)({email:""}),u=(0,w.iH)(null);let r=(0,w.iH)("");(0,s.bv)((()=>{r.value=document.body.clientWidth,window.onresize=()=>(()=>{r.value=document.body.clientWidth})()}));const c=e=>{e&&e.resetFields()},d=e=>{e&&e.resetFields()};return(e,t)=>{const l=(0,s.up)("el-input"),p=(0,s.up)("el-form-item"),m=(0,s.up)("el-form"),f=(0,s.up)("el-button"),g=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.j4)(g,{modelValue:(0,w.SU)(a),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,w.dq)(a)?a.value=e:a=e),style:(0,h.j5)((0,w.SU)(r)>768?"width: 33%":768===(0,w.SU)(r)?"width: 50%":"width: 80%"),"align-center":""},{header:(0,s.w5)((()=>[(0,s._)("div",fe,(0,h.zw)(i.title),1)])),footer:(0,s.w5)((()=>[(0,s._)("div",{class:(0,h.C_)(["flex mx-auto",(0,w.SU)(r)>768?"flex-row":"flex-col"])},[(0,s.Wm)(f,{type:"danger",onClick:t[1]||(t[1]=e=>c((0,w.SU)(u))),style:(0,h.j5)((0,w.SU)(r)>768?"width:48%":"width:100%; margin-bottom:8px")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(i.primaryButton),1)])),_:1},8,["style"]),(0,s.Wm)(f,{onClick:t[2]||(t[2]=e=>d((0,w.SU)(u))),style:(0,h.j5)((0,w.SU)(r)>768?"width:48%":"width:100%; margin-left:auto")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(i.secondaryButton),1)])),_:1},8,["style"])],2)])),default:(0,s.w5)((()=>[(0,s._)("div",ge,[(0,s._)("img",{src:me,style:(0,h.j5)((0,w.SU)(r)>=768?"width: 8rem":"width: 6rem")},null,4)]),(0,s._)("div",{class:(0,h.C_)(["dialog-description",(0,w.SU)(r)>=768?"w-3/4":"w-full text-sm"])},(0,h.zw)(o.description),3),(0,s.Wm)(m,{model:(0,w.SU)(n),"label-width":"150px","label-position":"top",size:"large",rules:e.rules,ref_key:"ruleFormRef",ref:u,class:"mx-auto",style:{"margin-bottom":"-30px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{label:o.emailField.name,prop:"email"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{modelValue:(0,w.SU)(n).email,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,w.SU)(n).email=e),type:"password",placeholder:o.emailField.placeholder,"show-password":"",class:"w-full","prefix-icon":(0,w.SU)(ce.HEZ),clearable:""},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","style"])}}};const we=he;var ve=we;const be={class:"form-title"},ye={class:"w-full"};var _e={__name:"LoginForm",setup(e){const t={title:"Welcome to iSART!",userField:{name:"Username",placeholder:"Please enter username"},passwordField:{name:"Password",placeholder:"Please enter password"},primaryButton:"Log in",secondaryButton:"Reset",linkButton:"Forgot your password?"},l=(0,w.qj)({username:[{required:!0,message:"Please enter username",trigger:"blur"},{min:4,max:6,message:"Length should be 4 to 6",trigger:"blur"},{validator:function(e,t,l){0==/^[a-zA-Z0-9]{4,6}$/.test(t)?l(new Error("Username must only include numbers and letters")):l()},trigger:"blur"}],password:[{required:!0,message:"Please enter password",trigger:"blur"},{min:6,max:8,message:"Length should be 6 to 8",trigger:"blur"},{validator:function(e,t,l){0==/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,8}$/.test(t)?l(new Error("Password must include at least 1 number (0-9), 1 upper case letter (A-Z). Special characters are allowed")):l()},trigger:"blur"}]}),i=(0,w.qj)({username:"",password:""}),o=(0,w.iH)(null),n=(0,f.tv)(),u={success:"Login successfully!",no_account_found:"Incorrect username or password",err:"Something went wrong... Please try it later"};let r=(0,w.iH)(!1),c=(0,w.iH)("");(0,s.bv)((()=>{c.value=document.body.clientWidth,window.onresize=()=>(()=>{c.value=document.body.clientWidth})()}));const d=async e=>{e&&await e.validate((e=>{e&&de.Z.post("api/token/",{username:i.username,password:i.password}).then((e=>{if(200===e.status){(0,pe.z8)({showClose:!0,message:u.success,type:"success"});const t=localStorage,l=Date.parse(e.headers.date)+36e5;t.setItem("access.isart",e.data.access),t.setItem("refresh.isart",e.data.refresh),t.setItem("expiredTime.isart",l),t.setItem("username.isart",i.username),e.data.is_admin?n.push({name:"admin-landing",params:{username:i.username}}):n.push({name:"user-landing",params:{username:i.username}})}})).catch((e=>{401===e.response.status?(0,pe.z8)({showClose:!0,message:u.no_account_found,type:"error"}):(0,pe.z8)({showClose:!0,message:e,type:"error"})}))}))},p=async e=>{e&&e.resetFields()};return(e,n)=>{const u=(0,s.up)("el-input"),m=(0,s.up)("el-form-item"),f=(0,s.up)("el-button"),g=(0,s.up)("el-form"),v=(0,s.up)("el-row"),b=(0,s.up)("el-col");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(b,{sm:{span:10},align:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{class:"form-container"},{default:(0,s.w5)((()=>[(0,s._)("div",be,(0,h.zw)(t.title),1),(0,s.Wm)(v,{justify:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{model:(0,w.SU)(i),"label-width":"120px","label-position":"top",size:"large",class:"w-[90%]",rules:(0,w.SU)(l),ref_key:"ruleFormRef",ref:o},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{label:t.userField.name,prop:"username",class:"mb-2",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{modelValue:(0,w.SU)(i).username,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,w.SU)(i).username=e),class:"w-full",placeholder:t.userField.placeholder,"prefix-icon":(0,w.SU)(ce.n5m),clearable:""},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label"]),(0,s.Wm)(m,{label:t.passwordField.name,prop:"password",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{modelValue:(0,w.SU)(i).password,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,w.SU)(i).password=e),type:"password",placeholder:t.passwordField.placeholder,"show-password":"",class:"w-full","prefix-icon":(0,w.SU)(ce.HEZ),clearable:""},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label"]),(0,s.Wm)(m,{class:(0,h.C_)(["flex mx-auto mt-8",(0,w.SU)(c)>768?"flex-row":"flex-col"])},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{type:"primary",onClick:n[2]||(n[2]=(0,a.iM)((e=>d((0,w.SU)(o))),["prevent"])),plain:!0,duration:"20000",class:(0,h.C_)((0,w.SU)(c)>768?"w-[48%]":"w-full mb-2")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(t.primaryButton),1)])),_:1},8,["class"]),(0,s.Wm)(f,{onClick:n[3]||(n[3]=e=>p((0,w.SU)(o))),style:(0,h.j5)((0,w.SU)(c)>768?"width:48%":"width:100%; margin-left:auto")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(t.secondaryButton),1)])),_:1},8,["style"]),(0,s._)("div",ye,[(0,s.Wm)(f,{type:"danger",link:"",onClick:n[4]||(n[4]=e=>(0,w.dq)(r)?r.value=!(0,w.SU)(r):r=!(0,w.SU)(r)),class:"link-button"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(t.linkButton),1)])),_:1})])])),_:1},8,["class"])])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(ve,{"forgot-password-dialog-visible":(0,w.SU)(r)},null,8,["forgot-password-dialog-visible"])],64)}}};const ke=(0,n.Z)(_e,[["__scopeId","data-v-688da422"]]);var Se=ke;const We={class:"background-container"},xe=(0,s._)("div",{style:{display:"flex","justify-content":"center"}},[(0,s._)("img",{src:re,class:"lg:max-xl:w-96 md:max-lg:w-80"})],-1);var qe={__name:"Login",setup(e){return(e,t)=>{const l=(0,s.up)("el-col"),a=(0,s.up)("el-row");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(I),(0,s._)("section",We,[(0,s.Wm)(a,{class:"content-container"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{span:12,class:"hidden-xs-only"},{default:(0,s.w5)((()=>[xe])),_:1}),(0,s.Wm)(Se)])),_:1})])])}}};const Ue=qe;var Ie=Ue;async function Ce(){const e=localStorage,t=Number(e.getItem("expiredTime.isart")),l=(new Date).getTime(),a=e.getItem("refresh.isart");let s=e.getItem("username.isart"),i=!1;if(t>l)i=!0,console.log("authorization access");else if(null!==a)try{let t=await de.Z.post("/api/token/refresh/",{refresh:a});const l=Date.parse(t.headers.date)+36e5;e.setItem("access.isart",t.data.access),e.setItem("expiredTime.isart",l),e.removeItem("refresh.isart"),i=!0,console.log("authorization refresh")}catch(o){e.clear(),i=!1,console.log("authorization err")}else e.clear(),i=!1,console.log("authorization exp");return console.log("authorization done"),[i,s]}var Fe=Ce,He=l.p+"img/padlock.8c1adf2d.png",Pe=l.p+"img/expired.ffd443ac.png";const je={class:"dialog-title"},ze={class:"dialog-image-container"},Ve={class:"dialog-description"},Te={style:{"margin-top":"-20px"}};var De={__name:"TokenExpiredDialog",props:{tokenExpiredDialogVisible:{type:Boolean,default:!1}},setup(e){const t=e,{tokenExpiredDialogVisible:l}=(0,w.BK)(t);let a=(0,w.iH)(!1);(0,s.YP)(l,(()=>{a.value=!a.value}));const i={title:"Your session has expired :-(",description:"You will be redirected to Login page.",button:"Confirm"},o=(0,f.tv)();let n=(0,w.iH)("");(0,s.bv)((()=>{n.value=document.body.clientWidth,window.onresize=()=>(()=>{n.value=document.body.clientWidth})()}));const u=()=>{o.push({name:"login"})};return(e,t)=>{const l=(0,s.up)("el-button"),o=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.j4)(o,{modelValue:(0,w.SU)(a),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,w.dq)(a)?a.value=e:a=e),style:(0,h.j5)((0,w.SU)(n)>=768?"width: 33%":768===(0,w.SU)(n)?"width: 50%":"width: 80%"),"align-center":"","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{header:(0,s.w5)((()=>[(0,s._)("div",je,(0,h.zw)(i.title),1)])),footer:(0,s.w5)((()=>[(0,s._)("div",Te,[(0,s.Wm)(l,{type:"danger",class:"w-full",onClick:u},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(i.button),1)])),_:1})])])),default:(0,s.w5)((()=>[(0,s._)("div",ze,[(0,s._)("img",{src:Pe,style:(0,h.j5)((0,w.SU)(n)>768?"width: 8rem":"width: 6rem")},null,4)]),(0,s._)("div",Ve,(0,h.zw)(i.description),1)])),_:1},8,["modelValue","style"])}}};const Me=De;var Re=Me;const Ae={class:"dialog-title"},Ee={class:"dialog-image-container"};var Be={__name:"ResetPasswordDialog",props:{resetPasswordDialogVisible:{type:Boolean,default:!1}},setup(e){const t=e,{resetPasswordDialogVisible:l}=(0,w.BK)(t);let a=(0,w.iH)(!1);(0,s.YP)(l,(()=>{a.value=!a.value}));const i={title:"Reset password",primaryButton:"Confirm",secondaryButton:"Reset"},o={success:"Congrats! You have reset your password",err:"Something went wrong... Please try it later"},n={newPasswordField:{name:"New password",placeholder:"Please enter new password"},confirmNewPasswordField:{name:"Confirm new password",placeholder:"Please confirm new password"}},u=(0,w.qj)({new_password:[{required:!0,message:"Please enter password",trigger:"blur"},{min:6,max:8,message:"Length should be 6 to 8",trigger:"blur"},{validator:function(e,t,l){0==/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,8}$/.test(t)?l(new Error("Password must include at least 1 number (0-9), 1 upper case letter (A-Z). Special characters are allowed.")):l()},trigger:"blur"}],confirm_new_password:[{required:!0,message:"Please password",trigger:"blur"},{validator:function(e,t,l){r.new_password!=r.confirm_new_password?l(new Error("New Password and confirm password don't match.")):l()},trigger:"blur"}]}),r=(0,w.qj)({new_password:"",confirm_new_password:""}),c=(0,w.iH)(null),d=(0,f.tv)(),p=localStorage;let m=(0,w.iH)(!1),g=(0,w.iH)("");(0,s.bv)((()=>{g.value=document.body.clientWidth,window.onresize=()=>(()=>{g.value=document.body.clientWidth})()}));const v=async e=>{e&&await e.validate((e=>{if(e){const e=p.getItem("username.isart"),t=p.getItem("access.isart");Fe().then((l=>{l[0]?de.Z.patch("/api/user/"+e+"/",{username:e,password:r.new_password},{headers:{Authorization:"Bearer "+t}}).then((e=>{200===e.status?((0,pe.z8)({showClose:!0,message:o.success,type:"success"}),d.push({name:"login"})):(0,pe.z8)({showClose:!0,message:o.err,type:"error"})})).catch((e=>{400===e.response.status?(0,pe.z8)({showClose:!0,message:e.response.data.non_field_errors[0],type:"error"}):(0,pe.z8)({showClose:!0,message:o.err,type:"error"})})):m.value=!0}))}}))},b=e=>{e&&e.resetFields()};return(e,t)=>{const l=(0,s.up)("el-input"),o=(0,s.up)("el-form-item"),d=(0,s.up)("el-form"),p=(0,s.up)("el-button"),f=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(f,{modelValue:(0,w.SU)(a),"onUpdate:modelValue":t[4]||(t[4]=e=>(0,w.dq)(a)?a.value=e:a=e),style:(0,h.j5)((0,w.SU)(g)>768?"width: 33%":768===(0,w.SU)(g)?"width: 50%":"width: 70%"),"align-center":""},{header:(0,s.w5)((()=>[(0,s._)("div",Ae,(0,h.zw)(i.title),1)])),footer:(0,s.w5)((()=>[(0,s._)("div",{class:(0,h.C_)(["flex mx-auto",(0,w.SU)(g)>768?"flex-row":"flex-col"])},[(0,s.Wm)(p,{type:"danger",onClick:t[2]||(t[2]=e=>v((0,w.SU)(c))),style:(0,h.j5)((0,w.SU)(g)>768?"width:48%":"width:100%; margin-bottom:8px")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(i.primaryButton),1)])),_:1},8,["style"]),(0,s.Wm)(p,{onClick:t[3]||(t[3]=e=>b((0,w.SU)(c))),style:(0,h.j5)((0,w.SU)(g)>768?"width:48%":"width:100%; margin-left:auto")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(i.secondaryButton),1)])),_:1},8,["style"])],2)])),default:(0,s.w5)((()=>[(0,s._)("div",Ee,[(0,s._)("img",{src:He,style:(0,h.j5)((0,w.SU)(g)>=768?"width: 8rem":"width: 6rem")},null,4)]),(0,s.Wm)(d,{model:(0,w.SU)(r),"label-width":"150px","label-position":"top",size:"large",rules:(0,w.SU)(u),ref_key:"ruleFormRef",ref:c,class:"mx-auto",style:{"margin-bottom":"-30px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{label:n.newPasswordField.name,prop:"new_password"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{modelValue:(0,w.SU)(r).new_password,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,w.SU)(r).new_password=e),type:"password",placeholder:n.newPasswordField.placeholder,"show-password":"",class:"w-full","prefix-icon":(0,w.SU)(ce.HEZ),clearable:""},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label"]),(0,s.Wm)(o,{label:n.confirmNewPasswordField.name,prop:"confirm_new_password",class:"mt-8"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{modelValue:(0,w.SU)(r).confirm_new_password,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,w.SU)(r).confirm_new_password=e),type:"password",placeholder:n.confirmNewPasswordField.placeholder,"show-password":"",class:"w-full","prefix-icon":(0,w.SU)(ce.HEZ),clearable:""},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","style"]),(0,s.Wm)(Re,{"token-expired-dialog-visible":(0,w.SU)(m)},null,8,["token-expired-dialog-visible"])])}}};const Ne=Be;var Oe=Ne;const Ye=e=>((0,s.dD)("data-v-218ffb00"),e=e(),(0,s.Cn)(),e),Le={class:"header-item"},Ze=Ye((()=>(0,s._)("img",{src:v,width:"40"},null,-1))),$e={class:"navbar-title"},Ke={class:"header-item"},Je={class:"username hidden-sm-and-down"},Ge={class:"header-item flex-wrap justify-end"},Xe=["v-show"],Qe=["onClick"],et=["onClick"],tt=["onClick"];var lt={__name:"UserCenter",setup(e){const t={title:"iSART",primaryButton:"Update password",secondaryButton:"Sign out"},l=[{title:"Before You Start",pathname:"user-landing",icon:"fa-user-gear",isGroup:!1},{title:"FMEA Overview",pathname:"fmea",icon:"fa-outdent",isGroup:!1},{title:"Failure Modes Database",isGroup:!0,icon:"fa-toggle-on",subtitle:[{title:"Process Steps",pathname:"fm-list",icon:"fa-list-check"},{title:"Failure Modes List",pathname:"fm-detail",params:{process_ids:""},icon:"fa-filter"}]},{title:"Report New Failure Modes",pathname:"fm-create",icon:"fa-book-bookmark",isGroup:!1},{title:"My FMEA",pathname:"fmea",icon:"fa-folder-plus",isGroup:!1},{title:"i-SART Evaluation",pathname:"fmea",icon:"fa-comments",isGroup:!1}];let i=(0,w.iH)(!1),o=(0,w.iH)(!1),n=(0,w.iH)(""),u=(0,w.iH)(""),r=(0,w.iH)(!1),c=(0,w.iH)(!1),d=(0,w.iH)(!1);const p=(0,f.tv)(),m=localStorage;(0,s.bv)((()=>{n.value=document.body.clientWidth,window.onresize=()=>(()=>(n.value=document.body.clientWidth,n.value<768?o.value=i.value=!0:o.value=!1))(),Fe().then((e=>{r.value=e[0],u.value=e[1];let t=p.currentRoute.value.params.username;null!==u.value&&t==u.value||(c.value=!r.value)})).catch((e=>console.log(e)))}));const g=(e,t=null)=>{t?p.push({name:e,params:t}):p.push({name:e})};(0,s.YP)((()=>p.currentRoute.value.params),(e=>{e&&Fe().then((e=>{r.value=e[0],u.value=e[1];let t=p.currentRoute.value.params.username;null!==u.value&&t==u.value||(c.value=!r.value)})).catch((e=>console.log(e)))}));const v=()=>{m.clear(),g("login")};return(e,n)=>{const r=(0,s.up)("el-icon"),p=(0,s.up)("el-button"),m=(0,s.up)("el-header"),f=(0,s.up)("el-switch"),b=(0,s.up)("font-awesome-icon"),y=(0,s.up)("el-menu-item"),_=(0,s.up)("el-sub-menu"),k=(0,s.up)("el-menu"),S=(0,s.up)("el-aside"),W=(0,s.up)("router-view"),x=(0,s.up)("el-main"),q=(0,s.up)("el-container");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(q,{class:"home-container"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s._)("div",Le,[Ze,(0,s._)("div",$e,(0,h.zw)(t.title),1)]),(0,s._)("div",Ke,[(0,s._)("div",Je,"Welcome, "+(0,h.zw)((0,w.SU)(u)),1),(0,s._)("div",Ge,[(0,s.Wm)(p,{type:"danger",onClick:n[0]||(n[0]=e=>(0,w.dq)(d)?d.value=!(0,w.SU)(d):d=!(0,w.SU)(d)),text:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"el-icon--left"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(ce.I8b))])),_:1}),(0,s.Uk)((0,h.zw)(t.primaryButton),1)])),_:1}),(0,s.Wm)(p,{type:"danger",text:"",onClick:(0,a.iM)(v,["prevent"])},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"el-icon--left"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(ce.Rrw))])),_:1}),(0,s.Uk)((0,h.zw)(t.secondaryButton),1)])),_:1},8,["onClick"])])])])),_:1}),(0,s.Wm)(q,{class:"bg-stone-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{width:(0,w.SU)(i)?"64px":"250px"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"toggle-button","v-show":!(0,w.SU)(o)},[(0,s.Wm)(f,{modelValue:(0,w.SU)(i),"onUpdate:modelValue":n[1]||(n[1]=e=>(0,w.dq)(i)?i.value=e:i=e),class:"ml-2 flex","inline-prompt":"",style:{"--el-switch-on-color":"#db2777","--el-switch-off-color":"#db2777"},"inactive-text":"Collapse"},null,8,["modelValue"])],8,Xe),(0,s.Wm)(k,{"active-text-color":"#db2777","background-color":"#475569","default-active":"1","text-color":"#fff",class:"h-full font-medium",collapse:(0,w.SU)(i),"collapse-transition":!1},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(l,(({title:t,pathname:l,icon:a,isGroup:o,subtitle:n},u)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[o?((0,s.wg)(),(0,s.j4)(_,{key:0,index:u+1+""},{title:(0,s.w5)((()=>[(0,s._)("div",{onClick:t=>g(l,e.params),class:"w-full"},[(0,s.Wm)(b,{icon:`fa-solid ${a}`,class:"ml-2 mr-5"},null,8,["icon"]),(0,s.Uk)(" "+(0,h.zw)(t),1)],8,Qe)])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n,(({title:e,pathname:t,icon:l,params:a},o)=>((0,s.wg)(),(0,s.j4)(y,{key:e,index:u+1+"-"+(o+1)},{default:(0,s.w5)((()=>[(0,s._)("div",{onClick:e=>g(t,a),class:"w-full"},[(0,s.Wm)(b,{icon:`fa-solid ${l}`,class:(0,h.C_)([(0,w.SU)(i)?"mb-5":"","mr-4"])},null,8,["icon","class"]),(0,s.Uk)(" "+(0,h.zw)(e),1)],8,et)])),_:2},1032,["index"])))),128))])),_:2},1032,["index"])):((0,s.wg)(),(0,s.j4)(y,{key:1,index:u+1+""},{default:(0,s.w5)((()=>[(0,s._)("div",{onClick:t=>g(l,e.params),class:"w-full"},[(0,s.Wm)(b,{icon:`fa-solid ${a}`,class:"ml-2 mr-5"},null,8,["icon"]),(0,s.Uk)(" "+(0,h.zw)(t),1)],8,tt)])),_:2},1032,["index"]))],64)))),64))])),_:1},8,["collapse"])])),_:1},8,["width"]),(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(W)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(Oe,{"reset-password-dialog-visible":(0,w.SU)(d)},null,8,["reset-password-dialog-visible"]),(0,s.Wm)(Re,{"token-expired-dialog-visible":(0,w.SU)(c)},null,8,["token-expired-dialog-visible"])],64)}}};const at=(0,n.Z)(lt,[["__scopeId","data-v-218ffb00"]]);var st=at,it=l.p+"img/doctor2.1b769f58.png";const ot={class:"form-title"};var nt={__name:"RegisterForm",setup(e){const t={title:"Create Account",userField:{name:"Username",placeholder:"Please enter username"},passwordField:{name:"Password",placeholder:"Please enter password"},confirmPasswordField:{name:"Repeat password",placeholder:"Please enter password again"},emailField:{name:"Email",placeholder:"Please enter email address"},primaryButton:"Sign up",secondaryButton:"Reset"},l=(0,w.qj)({username:[{required:!0,message:"Please enter username",trigger:"blur"},{min:4,max:6,message:"Length should be 4 to 6",trigger:"blur"},{validator:function(e,t,l){0==/^[a-zA-Z0-9]{4,6}$/.test(t)?l(new Error("Username must only include numbers and letters")):l()},trigger:"blur"}],password:[{required:!0,message:"Please enter password",trigger:"blur"},{min:6,max:8,message:"Length should be 6 to 8",trigger:"blur"},{validator:function(e,t,l){0==/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,8}$/.test(t)?l(new Error("Password must include at least 1 number (0-9), 1 upper case letter (A-Z). Special characters are allowed")):l()},trigger:"blur"}],confirm_password:[{required:!0,message:"Please enter password",trigger:"blur"},{validator:function(e,t,l){a.password!=a.confirm_password?l(new Error("Password and confirm password don't match")):l()},trigger:"blur"}],email:[{required:!0,message:"Please enter email",trigger:"blur"},{validator:function(e,t,l){0==/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)?l(new Error("Please enter your email address in format yourname@example.com")):l()},trigger:"blur"}]}),a=(0,w.qj)({username:"",password:"",confirm_password:"",email:""}),i=(0,w.iH)(null),o=(0,f.tv)();let n=(0,w.iH)("");const u={success:"Congrats! You have signed up successfully",err:"Something went wrong... Please try it later"};(0,s.bv)((()=>{n.value=document.body.clientWidth,window.onresize=()=>(()=>{n.value=document.body.clientWidth})()}));const r=async e=>{e&&await e.validate((e=>{e&&de.Z.post("api/user/",{username:a.username,password:a.password,email:a.email}).then((e=>{201===e.status?((0,pe.z8)({showClose:!0,message:u.success,type:"success"}),o.push({name:"login"})):(0,pe.z8)({showClose:!0,message:u.err,type:"error"})})).catch((e=>{const{username:t,email:l}=e.response.data;if(400===e.response.status){const e=`${void 0===t?"":t} </br>\n                             ${void 0===l?"":l}`;(0,pe.z8)({showClose:!0,dangerouslyUseHTMLString:!0,message:e,type:"error"})}else(0,pe.z8)({showClose:!0,message:e,type:"error"})}))}))},c=e=>{e&&e.resetFields()};return(e,o)=>{const u=(0,s.up)("el-row"),d=(0,s.up)("el-input"),p=(0,s.up)("el-form-item"),m=(0,s.up)("el-button"),f=(0,s.up)("el-form"),g=(0,s.up)("el-col");return(0,s.wg)(),(0,s.j4)(g,{sm:{span:10},align:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{class:"form-container"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{justify:"center"},{default:(0,s.w5)((()=>[(0,s._)("div",ot,(0,h.zw)(t.title),1)])),_:1}),(0,s.Wm)(u,{justify:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{model:(0,w.SU)(a),"label-width":"120px","label-position":"top",size:"large",class:"w-[90%]",rules:(0,w.SU)(l),ref_key:"ruleFormRef",ref:i},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{label:t.userField.name,prop:"username",class:"mb-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{modelValue:(0,w.SU)(a).username,"onUpdate:modelValue":o[0]||(o[0]=e=>(0,w.SU)(a).username=e),class:"w-full","prefix-icon":(0,w.SU)(ce.n5m),placeholder:t.userField.placeholder,clearable:""},null,8,["modelValue","prefix-icon","placeholder"])])),_:1},8,["label"]),(0,s.Wm)(p,{label:t.passwordField.name,prop:"password"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{modelValue:(0,w.SU)(a).password,"onUpdate:modelValue":o[1]||(o[1]=e=>(0,w.SU)(a).password=e),type:"password",placeholder:t.passwordField.placeholder,"show-password":"",class:"w-full","prefix-icon":(0,w.SU)(ce.HEZ),clearable:""},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label"]),(0,s.Wm)(p,{label:t.confirmPasswordField.name,prop:"confirm_password"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{modelValue:(0,w.SU)(a).confirm_password,"onUpdate:modelValue":o[2]||(o[2]=e=>(0,w.SU)(a).confirm_password=e),type:"password",placeholder:t.confirmPasswordField.placeholder,"show-password":"",class:"w-full","prefix-icon":(0,w.SU)(ce.HEZ),clearable:""},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label"]),(0,s.Wm)(p,{label:t.emailField.name,prop:"email"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{modelValue:(0,w.SU)(a).email,"onUpdate:modelValue":o[3]||(o[3]=e=>(0,w.SU)(a).email=e),"prefix-icon":(0,w.SU)(ce.v0C),placeholder:t.emailField.placeholder,type:"email",class:"w-full",clearable:""},null,8,["modelValue","prefix-icon","placeholder"])])),_:1},8,["label"]),(0,s.Wm)(p,{class:(0,h.C_)(["flex mx-auto",(0,w.SU)(n)>768?"flex-row":"flex-col"])},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"primary",onClick:o[4]||(o[4]=e=>r((0,w.SU)(i))),style:(0,h.j5)((0,w.SU)(n)>768?"width:48%":"width:100%; margin-bottom:8px"),plain:!0,duration:"20000"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(t.primaryButton),1)])),_:1},8,["style"]),(0,s.Wm)(m,{onClick:o[5]||(o[5]=e=>c((0,w.SU)(i))),style:(0,h.j5)((0,w.SU)(n)>768?"width:48%":"width:100%; margin-left:auto")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(t.secondaryButton),1)])),_:1},8,["style"])])),_:1},8,["class"])])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})}}};const ut=(0,n.Z)(nt,[["__scopeId","data-v-379f5782"]]);var rt=ut;const ct={class:"background-container"},dt=(0,s._)("div",{style:{display:"flex","justify-content":"center"}},[(0,s._)("img",{src:it,class:"lg:max-xl:w-96 md:max-lg:w-80"})],-1);var pt={__name:"Signup",setup(e){return(e,t)=>{const l=(0,s.up)("el-col"),a=(0,s.up)("el-row");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(I),(0,s._)("section",ct,[(0,s.Wm)(a,{class:"content-container"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{span:12,class:"hidden-xs-only",style:{"align-self":"center"}},{default:(0,s.w5)((()=>[dt])),_:1}),(0,s.Wm)(rt)])),_:1})])])}}};const mt=pt;var ft=mt;const gt=[[{phase:"1",title:"Patient assessment"},{phase:"2",title:"Patient creation"},{phase:"3",title:"Scheduling/Booking"},{phase:"4",title:"Simulation/Imaging"},{phase:"5",title:"Transfer images"}],[{phase:"6",title:"Treatment planning"},{phase:"7",title:"Pretreatment procedures"},{phase:"8",title:"Treatment"},{phase:"9",title:"On-treatment procedures"},{phase:"10",title:"Posttreatment procedures"}]],ht=[[{label:"1. Patient Assessment / Initial Consultation",children:[{label:"1.1 Patient identification"},{label:"1.2 Review medical records including pathology report/staging, imaging"},{label:"1.3 Physical exam"},{label:"1.4 Evaluation of previous radiotherapy treatments"},{label:"1.5 Evaluation of patient medical conditions / concomitant diseases (comorbidities)"},{label:"1.6 Decision to treat"},{label:"1.7 Radiation Oncologist's report / Selection of clinical protocol"},{label:"1.8 Additional exams / prescribe medication"},{label:"1.9 Informed consent"},{label:"1.10 Patient education"},{label:"1.11 Insurance evaluation"},{label:"1.12 Software related items"},{label:"1.13 Other"}]}],[{label:"2. Patient information entered into radiation oncology information system / written chart",children:[{label:"2.1 Patient ID"},{label:"2.2 Medical history"},{label:"2.3 Software related items"},{label:"2.4 Other"}]}],[{label:"3. Scheduling/booking procedures pretreatment, planning, treatment and follow-up",children:[{label:"3.1 Bookings made according to protocol"},{label:"3.2 Bookings made according to request details (including requested changes following initial booking)"},{label:"3.3 Recording of booked appointments (including requested changes following initial booking)"},{label:"3.4 Communication of appointments to patient (including requested changes following initial booking)"},{label:"3.5 Communication of appointment between staff groups (including requested changes following initial booking)"},{label:"3.6 Software related items"},{label:"3.7 Other"}]}],[{label:"4. Imaging for RT planning / CT simulation - Other imaging",children:[{label:"4.1 Patient identification"},{label:"4.2 Documentation prior to scanning"},{label:"4.3 Patient preparation"},{label:"4.4 Patient position and immobilization"},{label:"4.5 Special devices prepared as necessary for motion management"},{label:"4.6 Special devices prepared for surface-image guidance"},{label:"4.7 Contrast administration"},{label:"4.8 CT image acquisition",children:[{label:"4.8a CT image acquisition"},{label:"4.8b PET CT simulation"}]},{label:"4.9 Marking reference point on patient if needed and /or localization device and in software"},{label:"4.10 Documentation after scanning"},{label:"4.11 Additional imaging modalities (i.e., MRI, US, PET)"},{label:"4.12 Software related items"},{label:"4.13 Other"}]}],[{label:"5. Transfer images and other Digital Imaging Communication in Medicine (DICOM) data",children:[{label:"5.1 Transfer of images to treatment planning system"},{label:"5.2 Transfer of images to archiving system"},{label:"5.3 Software related items"},{label:"5.4 Other"}]}],[{label:"6. Treatment planning",children:[{label:"6.1 Create case (define patient in TP database)"},{label:"6.2 Import images into TP database"},{label:"6.3 Image registration (fusion) of multiple datasets"},{label:"6.4 Delineation of target(s) and organs at risk"},{label:"6.5 Treatment prescription - treatment parameters specified (site, modality, energy, doses, fractions)"},{label:"6.6 Treatment plan production: (e.g beam arrangement, dose calculation, dose distribution, doseâ€“volume histograms (DVHs), etc.)"},{label:"6.7 Evaluate/review treatment plan"},{label:"6.8 Final plan and prescription approval by physicist / physician"},{label:"6.9 Plan preparation (e.g. patient demographics, treatment protocol, prepare imaging /motion management, prepare patient chart, \n\n                transfer patient data to treatment delivery, scheduling)"},{label:"6.10 Software related items"},{label:"6.11 Other"}]}],[{label:"7. Pretreatment QA procedures",children:[{label:"7.1 Daily equipment /device QA"},{label:"7.2 Pretreatment patient-specific plan measurement (e.g., IMRT / VMAT QA)"},{label:"7.3 Software related items"},{label:"7.4 Other"}]}],[{label:"8. Treatment",children:[{label:"8.1 Patient identification "},{label:"8.2 Time-out (e.g., verification of clinical parameters, treatment consent, etc.)"},{label:"8.3 Prepare patient for treatment"},{label:"8.4 Patient positioning and immobilization"},{label:"8.5 Image guidance"},{label:"8.6 Utilization of motion management system / surface image guidance"},{label:"8.7 In vivo dosimetry"},{label:"8.8 Treatment delivery"},{label:"8.9 Software related items"},{label:"8.10 Other"}]}],[{label:"9. On-treatment quality management",children:[{label:"9.1 Clinical examination (prior 1rst fraction, weekly, end of RT)"},{label:"9.2 Review of portal images / localization images (including CBCT)"},{label:"9.3 Adaptive replanning"},{label:"9.4 Other"}]}],[{label:"10. Post treatment procedures & Follow-up",children:[{label:"10.1 Follow-up consultation and documentation "},{label:"10.2 Archiving of details of treatment"},{label:"10.3 Software related items"},{label:"10.4 Other"}]}]],wt=[{value:1,emoji:"ðŸŸ¢",label:"Low"},{value:2,emoji:"ðŸŸ¡",label:"Moderate"},{value:3,emoji:"ðŸŸ ",label:"Severe"},{value:4,emoji:"ðŸ”´",label:"Catastrophic"}],vt="Did not find what you are looking for? Type it here",bt="Nothing on my mind yet",yt=["VMAT, paperless","3D RT","IMRT","Lung SABR (SBRT)","RT pathway","SG DIBH BREAST","Vmat breast"],_t=[{effect:"",group:[{subeffect:"No effect",severity:[1]}]},{effect:"",group:[{subeffect:"Inconvenience",severity:[2,3]}]},{effect:"Suboptimal plan or treatment",group:[{subeffect:"Minor dosimetric error",severity:[4]}]},{effect:"Wrong dose, dose distribution, location, or volume",group:[{subeffect:"Limited toxicity or tumor underdose",severity:[5,6]},{subeffect:"Potentially serious toxicity or tumor underdose",severity:[7,8]}]},{effect:"Very wrong dose, dose distribution, location, or volume",group:[{subeffect:"Possible very serious toxicity or tumor underdose",severity:[9]},{subeffect:"Catastrophic",severity:[10]}]},{effect:"",group:[{subeffect:vt}]},{effect:"",group:[{subeffect:bt}]}],kt=[{cause:"Individual",subcauses:["Failure to recognise hazard (knowledge-based etc)","Decision making process (rule-based or old or invalid rule used etc)","Slips and lapses (skill-based, involuntary automaticity etc)","Communication (inaccuracy or omission of verbal, written etc)","Violation (deliberate action, acting outside scope etc)"]},{cause:"Procedural",subcauses:["No procedures / protocols (not in place or unavailable etc)","Inadequate procedures / protocols","Adherence to procedures / protocols","Process design (impractical and inefficient processes etc)"]},{cause:"Technical",subcauses:["Equipment or IT network failure (including immobilisation & accessories)","Commissioning/ calibration/ maintenance (including immobilisation & accessories)","Device / Product design"]},{cause:"Patient Related",subcauses:["Medical condition (inability to remain still etc)","Communication with the patient (language issues, comprehension etc)","Non-compliance"]},{cause:"Teamwork / Management / Organisational",subcauses:["Inadequate leadership (inadequate supervision, congruence or consistency etc)","Unclear responsibilities and lines of accountability (across the radiotherapy pathway)","Inadequate capital resources (equipment in use no longer fit for purpose etc)","Inadequate staffing (insufficient staffing levels or skill mix necessary to meet the demands of a service etc)","Inadequate training (inadequate or lack of training etc)","Inadequate risk assessment (poor change management etc)"]},{cause:"Environmental",subcauses:["Physical (power cut, control area excessively noisy, distractions etc)","Natural factors (fire, flood etc)"]},{cause:"Other",subcauses:["Other"]},{cause:vt},{cause:bt}],St=[{subprocessId:6,technologies:["Pinacle","Monaco","Eclipse","Accuracy Precision",vt]},{subprocessId:8,technologies:["Elekta Precise","Elekta Versa HD","Elekta Harmony","Elekta Infinity","Elekta Synergy","Varian Edge","Varian TrueBeam","Varian VitalBeam","Accuracy CyberKnife S7","Accuracy ToMotherapy","Accuracy Radixact","Accuracy Precision",vt]}],Wt=[{subprocessId:6,techniques:["2D RT","3D CRT","Tomotherapy","VMAT","IMRT","SRS / SRT","SBRT","electrons",vt]},{subprocessId:8,techniques:["2D RT","3D CRT","Tomotherapy","VMAT","IMRT","SRS / SRT","SBRT","electrons",vt],subtechniques:[{stepIds:[5],techniques:["KV","MV","CBCT",vt]}]}],xt=[{process_id:"8-5",name:"Imagining Technique"}],qt=[{mitigation:"Forcing functions and constraints",submitigations:["Interlock","Barriers","Computerized order entry with feedback"]},{mitigation:"Automation and computerization",submitigations:["Bar codes","Automated monitoring","Computerized verification","Computerized order entry"]},{mitigation:"Protocols, standards, and information",submitigations:["Check-off forms","Establishing protocol/clarify protocol","Alarms","Labels","Signs","Reduce similarity"]},{mitigation:"Independent double check systems and other redundancies",submitigations:["Redundant measurement","Independent review","Operational checks","Comparison with standards","Increase monitoring","Add status check","Acceptance test"]},{mitigation:"Rules and policies",submitigations:["Priority","Establishing/clarify communication line","Staffing","Better scheduling","Mandatory pauses","Repair","PMI (preventive maintenance inspection)","Establish and perform QC and QA (hardware and software)"]},{mitigation:"Education and information",submitigations:["Training","Experience","Instruction"]},{mitigation:vt},{mitigation:bt}],Ut={class:"flex mt-2 mb-6 justify-between"},It={class:"flex self-center space-x-4"},Ct={class:"flex flex-col justify-between h-[90%]"},Ft=["onClick"];var Ht={__name:"FailureModeDetail",setup(e){const t=(0,f.tv)();let l=(0,w.iH)(),a=(0,w.iH)(""),i=(0,w.iH)(null),o=(0,w.iH)(null),n=(0,w.iH)(""),u=(0,w.iH)(!1),r=(0,w.iH)(!1);const c=(0,w.qj)({currentPage:1,count:0,perPage:0,totalPages:1}),d=(0,w.qj)({fms:{name:"Process Steps",pathname:"fm-list"},fms_by_subprocess_id:void 0,fms_by_step_id:void 0}),p=[{name:"failure_mode",label:"Failure mode",width:null},{name:"subprocess_id",label:"Subprocess id",width:null},{name:"step_id",label:"Step id",width:null},{name:"severity",label:"Severity",width:null},{name:"process_type",label:"Technique",width:null},{name:"potential_effect",label:"Potential effect",width:null},{name:"potential_causes",label:"Potential causes",width:null},{name:"mitigation_strategy",label:"Mitigation strategy",width:null},{name:"updated",label:"Updated time"}],m={items:["Since this month","Since the last 3 months","Since the last 6 months"],timestamps:[30,90,180]},g='<table class="table-fixed">\n  <tr>\n    <td>ðŸŸ¢</td>\n    <td>Low</td>\n    <td>Inconvenience or minor effect</td>\n  </tr>\n  <tr>\n    <td>ðŸŸ¡</td>\n    <td>Moderate</td>\n    <td>Temporary injury (needs additional medical care)</td>\n  </tr>\n  <tr>\n    <td>ðŸŸ </td>\n    <td>Severe</td>\n    <td>Permanent injury (needs major medical intervention)</td>\n  </tr>\n  <tr>\n    <td >ðŸ”´</td>\n    <td>Catastrophic</td>\n    <td>Life-threatening or death</td>\n  </tr>\n</table>',v=(0,w.qj)({page:1,size:4}),b=()=>{let e=[];for(const t of wt)e.push({text:t.emoji+"    "+t.label,value:t.emoji});return e},y=()=>{let e=[];for(const t of yt)e.push({text:t,value:t});return e},_=()=>{let e=[];for(let t=0;t<m.timestamps.length;t++)e.push({text:m.items[t],value:m.timestamps[t]});return e},k=()=>{let e=[],[l,a]=t.currentRoute.value.params.process_ids;if(void 0!==l){l=parseInt(l);const t=ht[l-1][0].children;for(let a=0;a<t.length;a++)e.push({text:t[a].label,value:l+"-"+(a+1)})}else for(let t=0;t<ht.length;t++)if(void 0===a||t===a-1||0===a.length){const l=ht[t][0].children;for(let a=0;a<l.length;a++)e.push({text:l[a].label,value:t+1+"-"+(a+1)})}return e};(0,s.bv)((()=>{S(),void 0===t.currentRoute.value.params.process_ids&&(v.page=1,W(!0))}));const S=()=>{a.value=i.value.clientWidth,window.onresize=()=>(()=>{a.value=i.value.clientWidth})()},W=e=>{Fe().then((a=>{u.value=a[0],n.value=a[1];let s=t.currentRoute.value.params.username;s==n.value&&u.value&&null!==n.value?de.Z.get("/api/fm/",{params:v,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("access.isart")}}).then((t=>{l.value=t.data.results,c.perPage=t.data.per_page,c.count=t.data.count,c.currentPage=t.data.page_number,c.totalPages=t.data.total_pages,x(),e&&j(400,800,"mitigation_strategy")})).catch((e=>console.log(e))):t.push({name:"user-landing"})})).catch((e=>console.log(e)))},x=()=>{l.value.forEach((e=>{const t=e.subprocess_id;e.subprocess_id=ht[e.subprocess_id-1][0].label,e.step_id=ht[t-1][0].children[e.step_id-1].label;const l=e.severity;e.severity=wt[l-1].emoji,-1!==e.process_type.indexOf("[")&&(e.process_type=JSON.parse(e.process_type),e.process_type=0===e.process_type.length?void 0:e.process_type);const a=q(e.created);for(let s=0;s<m.timestamps.length;s++)if(a<m.timestamps[s]){e.updated=m.items[s];break}}))},q=e=>{const t=Date.parse(new Date),l=Date.parse(new Date(e));if(l<t){const e=t-l,a=Math.floor(e/864e5);return a}},U=()=>{const e=t.currentRoute.value.params.process_ids;1===e.length||""===e[1]?(d.fms_by_subprocess_id=e[0],d.fms_by_step_id=void 0,v["subprocess_id"]=e[0],v["step_id"]=void 0):2===e.length&&(d.fms_by_subprocess_id=e[0],d.fms_by_step_id=e[1],v["subprocess_id"]=e[0],v["step_id"]=e[1])},I=e=>{(e>c.currentPage&&e<=c.totalPages||e<c.currentPage&&e>=0)&&(c.currentPage=v.page=e,W(!1))};(0,s.YP)((()=>t.currentRoute.value.params.process_ids),(e=>{e?U():(v["subprocess_id"]=void 0,v["step_id"]=void 0,d.fms_by_step_id=void 0,d.fms_by_subprocess_id=void 0),v.page=1,W(!0)}),{immediate:!0});const C=e=>{if(e["severity"]){let t=[];if(0!==e.severity.length){e.severity.forEach((e=>{t.push(e)}));let l=[];t.forEach((e=>{wt.forEach((t=>{e==t.emoji&&l.push(t.value)}))})),v["severity"]=l.join(",")}else v["severity"]=void 0}else if(e["rpn"]);else if(e["process_type"]){let t=[];0!==e.process_type.length?(e.process_type.forEach((e=>{t.push(e)})),v["process_type"]=t.join(",")):v["process_type"]=void 0}else if(e["step_id"]){let t=[];e.step_id.forEach((e=>{t.push(e)})),v["process_id"]=t.join(",")}else if(e["updated"])if(0!=e.updated.length){let t=m.timestamps[0];e.updated.forEach((e=>{e>t&&(t=e)}));const l=new Date;t=l.setTime(l.setDate(l.getDate()-t));const a=F(t);v["updated_after"]=a}else v["updated_after"]=void 0;else v["process_id"]=void 0,v["step_id"]=void 0;v.page=1,W(!1)},F=e=>{const t=new Date(e),l=t.getFullYear();let a=t.getMonth()+1;a=a<10?"0"+a:a;let s=t.getDate();s=s<10?"0"+s:s;let i=t.getHours();i=i<10?"0"+i:i;let o=t.getMinutes();return o=o<10?"0"+o:o,l+"-"+a+"-"+s+" "+i+":"+o},H=e=>{let t=e.prop,l=e.order;v["ordering"]="ascending"===l?t+",":"descending"===l?"-"+t+",":void 0,v["page"]=1,W(!1)},P=(e,t,l,a)=>{if(0===l.length)return;let s=0,i="",o=document.createElement("canvas"),n=o.getContext("2d");if(n.font=e,""===t&&a)i=a;else{let e=0;for(let a=0;a<l.length;a++){const s=l[a][t]+"",i=l[e][t]+"",o=n.measureText(s).width,u=n.measureText(i).width;o>u&&(e=a)}i=l[e][t];const s=n.measureText(i).width,o=n.measureText(a).width;s<o&&(i=a||"blank")}let u=n.measureText(i);return s=u.width+40,s},j=(e,t,s)=>{let i=0;a.value+=t;for(let a=0;a<p.length;a++){let t=p[a];t.width=P("16px font-robot",t.name,[...l.value],t.label),t.width>e&&(t.width=e),i+=t.width}i<a.value&&!r.value&&p.forEach((e=>{const t=(a.value-i)/4;"step_id"===e.name||e.name===s||e.name===s?e.width+=t:"failure_mode"===e.name&&(e.width+=2*t)}))},z=e=>{if("severity"===e.column.property)return{textAlign:"center"}},V=()=>({color:"#475569",fontSize:"medium"}),T=e=>{const l=/^([1-9][\d]{0,2})(\.[1-9]+)?/;if(l.test(e)){let l=e.split(" ")[0],a=[];a=l.includes(".")?l.split("."):[l],t.push({name:"fm-detail",params:{process_ids:a}})}};return(e,t)=>{const a=(0,s.up)("font-awesome-icon"),n=(0,s.up)("el-breadcrumb-item"),u=(0,s.up)("el-breadcrumb"),f=(0,s.up)("el-pagination"),v=(0,s.up)("el-tooltip"),S=(0,s.up)("el-table-column"),W=(0,s.up)("el-tag"),x=(0,s.up)("el-table");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Ut,[(0,s.Wm)(u,{"separator-icon":(0,w.SU)(ce.olP),class:"flex items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{to:{name:d.fms.pathname}},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{icon:"fa-solid fa-house",class:"mr-2 text-[#db2777]"}),(0,s.Uk)(" "+(0,h.zw)(d.fms.name),1)])),_:1},8,["to"]),d.fms_by_subprocess_id?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[d.fms_by_step_id?((0,s.wg)(),(0,s.j4)(n,{key:0,onClick:t[0]||(t[0]=e=>(0,w.dq)(r)?r.value=!(0,w.SU)(r):r=!(0,w.SU)(r)),to:{name:"fm-detail",params:{process_ids:[d.fms_by_subprocess_id]}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)((0,w.SU)(ht)[d.fms_by_subprocess_id-1][0].label),1)])),_:1},8,["to"])):((0,s.wg)(),(0,s.j4)(n,{key:1},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)((0,w.SU)(ht)[d.fms_by_subprocess_id-1][0].label),1)])),_:1}))],64)):(0,s.kq)("",!0),d.fms_by_step_id?((0,s.wg)(),(0,s.j4)(n,{key:1},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)((0,w.SU)(ht)[d.fms_by_subprocess_id-1][0].children[d.fms_by_step_id-1].label),1)])),_:1})):(0,s.kq)("",!0)])),_:1},8,["separator-icon"]),(0,s._)("div",It,[(0,s.Wm)(f,{layout:"prev, pager, next, jumper",total:c.count,"page-size":c.perPage,"current-page":c.currentPage,onCurrentChange:I,"hide-on-single-page":1!=c.page_number},null,8,["total","page-size","current-page","hide-on-single-page"])])]),(0,s._)("div",Ct,[(0,s._)("div",{class:"flex-1 relative",ref_key:"containerRef",ref:i},[(0,s.Wm)(x,{data:(0,w.SU)(l),onSortChange:H,"highligh-current-row":"",stripe:"","cell-style":z,border:!0,"header-row-style":V,onFilterChange:C,ref_key:"tableRef",ref:o},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(p,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},["failure_mode"===e.name?((0,s.wg)(),(0,s.j4)(S,{key:0,prop:e.name,label:e.label,width:e.width+"px",fixed:""},{default:(0,s.w5)((e=>[(0,s.Uk)((0,h.zw)(e.row.failure_mode)+" ",1),e.row.abr?((0,s.wg)(),(0,s.j4)(v,{key:0,effect:"dark",content:e.row.abr,placement:"top"},{default:(0,s.w5)((()=>[e.row.abr?((0,s.wg)(),(0,s.j4)(a,{key:0,icon:"fa-solid fa-circle-info",class:"ml-2 text-[#db2777]"})):(0,s.kq)("",!0)])),_:2},1032,["content"])):(0,s.kq)("",!0)])),_:2},1032,["prop","label","width"])):"subprocess_id"===e.name&&void 0===d.fms_by_subprocess_id?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[((0,s.wg)(),(0,s.j4)(S,{key:0,prop:e.name,label:e.label,width:e.width+"px"},null,8,["prop","label","width"]))],64)):"subprocess_id"===e.name&&void 0!==d.fms_by_subprocess_id?((0,s.wg)(),(0,s.iD)(s.HY,{key:2},[(0,s.kq)("",!0)],64)):"step_id"===e.name&&void 0!==d.fms_by_step_id?((0,s.wg)(),(0,s.iD)(s.HY,{key:3},[(0,s.kq)("",!0)],64)):"step_id"===e.name&&void 0===d.fms_by_step_id?((0,s.wg)(),(0,s.iD)(s.HY,{key:4},[((0,s.wg)(),(0,s.j4)(S,{key:0,prop:e.name,label:e.label,width:e.width+"px",filters:k(),"column-key":"step_id"},null,8,["prop","label","width","filters"]))],64)):"severity"===e.name?((0,s.wg)(),(0,s.j4)(S,{key:5,prop:e.name,label:e.label,width:e.width+"px",sortable:"custom",filters:b(),"column-key":"severity"},{header:(0,s.w5)((e=>[(0,s.Uk)((0,h.zw)(e.column.property)+" ",1),(0,s.Wm)(v,{effect:"dark",content:g,"raw-content":"",placement:"top"},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{icon:"fa-solid fa-lightbulb",class:"ml-2 text-[#db2777]"})])),_:1})])),_:2},1032,["prop","label","width","filters"])):"process_type"===e.name?((0,s.wg)(),(0,s.j4)(S,{key:6,prop:e.name,label:e.label,width:e.width+"px",filters:y(),"column-key":"process_type"},null,8,["prop","label","width","filters"])):"found_in_other_steps"===e.name?((0,s.wg)(),(0,s.j4)(S,{key:7,prop:e.name,label:e.label,width:e.width+"px"},{default:(0,s.w5)((e=>[(0,s.Uk)((0,h.zw)(e.row.found_in_other_steps)+" ",1),(0,s._)("a",{onClick:t=>T(e.row.found_in_other_steps)},[e.row.found_in_other_steps?((0,s.wg)(),(0,s.j4)(a,{key:0,icon:"fa-solid fa-up-right-from-square",class:"ml-2 text-[#db2777] cursor-pointer"})):(0,s.kq)("",!0)],8,Ft)])),_:2},1032,["prop","label","width"])):"updated"===e.name?((0,s.wg)(),(0,s.j4)(S,{key:8,prop:e.name,label:e.label,width:e.width+"px",filters:_(),"filter-placement":"bottom-end","column-key":"updated",sortable:"custom"},{default:(0,s.w5)((e=>[(0,s.Wm)(W,{type:e.row.updated===`${m.items[0]}`?"danger":`${m.items[1]}`?"":"success","disable-transitions":""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(e.row.updated),1)])),_:2},1032,["type"])])),_:2},1032,["prop","label","width","filters"])):((0,s.wg)(),(0,s.j4)(S,{key:9,prop:e.name,label:e.label,width:e.width+"px"},null,8,["prop","label","width"]))],64)))),64))])),_:1},8,["data"])],512)])])}}};const Pt=(0,n.Z)(Ht,[["__scopeId","data-v-47c81fbc"]]);var jt=Pt,zt={__name:"FailureModeList",setup(e){const t=gt,l=ht,i=(0,w.iH)("1"),o=(0,f.tv)(),n=e=>{console.log(e)},u=e=>{let t=e.label.split(" ")[0],l=[];l=-1!==t.indexOf(".")?t.split("."):[t],o.push({name:"fm-detail",params:{process_ids:l}})},r={children:"children",label:"label"};return(e,o)=>{const c=(0,s.up)("el-menu-item"),d=(0,s.up)("el-menu"),p=(0,s.up)("el-tree");return(0,s.wg)(),(0,s.iD)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(t),((e,t)=>((0,s.wg)(),(0,s.j4)(d,{key:t,"default-active":i.value,mode:"horizontal",onSelect:n,"background-color":"#475569","text-color":"#fff","active-text-color":"#db2777"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,(({title:e,phase:t})=>((0,s.wg)(),(0,s.j4)(c,{key:e,index:t,onClick:e=>i.value=t,class:"menu-item"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(e),1)])),_:2},1032,["index","onClick"])))),128))])),_:2},1032,["default-active"])))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(l),((e,t)=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(p,{key:t,data:e,props:r,onNodeClick:u,"default-expand-all":!0,"expand-on-click-node":!1},null,8,["data"])),[[a.F8,i.value===t+1+""]]))),128))])}}};const Vt=(0,n.Z)(zt,[["__scopeId","data-v-22ffc50a"]]);var Tt=Vt;const Dt={class:"text-lg mb-5"},Mt=(0,s._)("br",null,null,-1),Rt=(0,s._)("br",null,null,-1);function At(e,t){return(0,s.wg)(),(0,s.iD)("div",Dt,[(0,s.Uk)("TBD "),Mt,Rt])}const Et={},Bt=(0,n.Z)(Et,[["render",At]]);var Nt=Bt;const Ot={class:"background-container"},Yt={class:"content-container"};var Lt={__name:"NotFound",setup(e){const t="Sorry, Page Not Found";return(e,l)=>{const a=(0,s.up)("el-empty");return(0,s.wg)(),(0,s.iD)("section",Ot,[(0,s._)("div",Yt,[(0,s.Wm)(a,{image:"https://cdn-icons-png.flaticon.com/512/5058/5058097.png","image-size":300,description:t,class:"text-3xl"})])])}}};const Zt=(0,n.Z)(Lt,[["__scopeId","data-v-67f92b78"]]);var $t=Zt,Kt=l.p+"img/lungs.f5dd5551.png";const Jt=e=>((0,s.dD)("data-v-a828114a"),e=e(),(0,s.Cn)(),e),Gt=Jt((()=>(0,s._)("img",{class:"",src:Kt},null,-1))),Xt=["innerHTML"],Qt=["innerHTML"],el={class:"mt-4"},tl=["innerHTML"];var ll={__name:"UserWelcome",setup(e){const t={title:"Welcome to i-SART, <br> An Intelligent Safety Assistant tool for Radiotherapy",text:"i-SART is based on AI algorithms and aims to promote patient safety with proactive learning about ways that can go wrong (failure modes: FMs) in radiotherapy (RT). <br>\n         It also facilitates the conduct of proactive risk assessment."},l=[{title:"Failure Modes Database",text:`The <a class='text-[#db2777] cursor-pointer underline underline-offset-4 font-semibold text-lg px-1' href="${location.pathname}/fm-list">failure modes database</a> is a data warehourse with FMs in RT. It has been developed from recent published papers and departmental reports which are based on worldwide used methodologies including Failure Mode and Effect Analysis (FMEA) AAPM TG-100, Failure Mode and Effect Criticality Analysis (FMECA), Healthcare Failure Mode and Effect Analysis (HFMEA) in RT. <br>\n    You can easily navigate between the sub - processes in the major process of RT and also between various steps.Severity of FMs, potential causes and effects, and mitigation strategies are displayed as they have been identified in the reports. Occurrence / likelihood and detectability indices and RPNs are not displayed, as they are purely subjective to departmental practices. <br>\n    Yet, keep in mind that a FM with low severity may hold a high RPN and needs further investigation. Explanation of the abbreviations appear as â€¦..when you place your cursor to theâ€¦..\n    <p class='text-[#db2777] text-lg font-semibold pt-4'>IMPORTANT NOTE</p>The FMs database should be used thoroughly as an advisory tool and not as a certified product. Every department functions under its own workflow, protocols, and safety barriers and technology that lead every risk assessment study. \n    `,icon:"fa-toggle-on"},{title:"FMEA overview",text:"This section provides a brief overview to the FMEA methodology.",icon:"fa-outdent"},{title:"My FMEA",text:"At this section, you can conduct your own proactive risk assessment based on the American Association of Physicists in Medicine (AAPM) TG-100.  \n           You can downloaded it and â€¦â€¦â€¦â€¦\n          You can assist in making RT safer by submitting your FMEA study.\n          It is confidential and it is protected by â€¦â€¦â€¦. Your data will only update the database.  ",icon:"fa-book-bookmark"},{title:"i-SART Evaluation",text:"Help us improve. Before you exit consider filling in the questionnaire whether or not you have used my FMEA section, to help us improve this program to fit your needs.",icon:"fa-comments"}];return(e,a)=>{const i=(0,s.up)("el-col"),o=(0,s.up)("el-row"),n=(0,s.up)("el-card"),u=(0,s.up)("font-awesome-icon"),r=(0,s.up)("el-collapse-item"),c=(0,s.up)("el-collapse");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)(o,{class:"py-4 px-8 items-center justify-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{span:4},{default:(0,s.w5)((()=>[Gt])),_:1}),(0,s.Wm)(i,{span:18},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"font-medium text-3xl mb-4 text-[#db2777]",innerHTML:t.title},null,8,Xt),(0,s._)("div",{class:"font-light text-base",innerHTML:t.text},null,8,Qt)])),_:1})])),_:1})])),_:1}),(0,s._)("div",el,[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(l,(({title:e,text:t,icon:l},a)=>(0,s.Wm)(r,{key:e,name:a+1+""},{title:(0,s.w5)((()=>[(0,s.Wm)(u,{icon:`fa-solid ${l}`,class:"mr-6"},null,8,["icon"]),(0,s.Uk)(" "+(0,h.zw)(e),1)])),default:(0,s.w5)((()=>[(0,s._)("div",{innerHTML:t},null,8,tl)])),_:2},1032,["name"]))),64))])),_:1})])])}}};const al=(0,n.Z)(ll,[["__scopeId","data-v-a828114a"]]);var sl=al,il=l.p+"img/medical-report.9cfa7b55.png";const ol=e=>((0,s.dD)("data-v-35bfea84"),e=e(),(0,s.Cn)(),e),nl={class:"overflow-hidden"},ul=ol((()=>(0,s._)("img",{src:il},null,-1))),rl=["innerHTML"],cl=["innerHTML"],dl={class:"mb-8"};var pl={__name:"FailureModeCreation",setup(e){const t=(0,w.iH)(!1),l=(0,w.iH)(!1),i=(0,w.iH)(1),o=(0,w.iH)(1),n=(0,w.iH)(!1),u=(0,w.iH)(0),r=(0,w.iH)(!1),c=(0,w.iH)(!1),d=(0,w.iH)(0),p=(0,w.iH)(!1),m=(0,w.iH)(!1),g=(0,w.iH)(!1),v=(0,w.iH)(!1),b=(0,w.iH)(!1),y=(0,w.iH)(!1),_=(0,w.iH)(!1),k=(0,w.iH)(!1),S=(0,w.iH)(!1),W=(0,w.iH)(!1),x=(0,w.iH)(!1),q=(0,w.iH)(!1),U=(0,w.iH)(!1),I=(0,w.qj)({value:[]}),C=(0,w.qj)({value:[]}),F=(0,w.qj)({value:[]}),H=(0,w.qj)({value:[]}),P=(0,w.iH)(null),j=(0,w.qj)({subprocess_id:null,step_id:null,failure_mode:null,potential_effect:{effect:null,effectInput:null,subeffect:null,severity:null,severityInput:null},potential_causes:{cause:null,subcause:null,causeInput:null},severity:null,mitigation_strategy:{mitigation:null,submitigation:null,mitigationInput:null},process_type:{technique:null,subtechnique:null,techniqueInput:null,subtechniqueInput:null},process_id:null,published:0,comments:null,technology:{technology:null,technologyInput:null},software_solution:null}),z=()=>{p.value=!1,m.value=!1,g.value=!1,v.value=!1,b.value=!1,y.value=!1,_.value=!1,D.technique="",D.subtechnique="",D.subtechniqueInput="",D.techniqueInput="",D.technologyInput="",D.technology=""},V={title:"Do you want to share any failure modes you encountered in the daily work?",text:"Some description goes here .....",primaryDivider:"Optional Fields",secondaryDivider:"Any Further Thoughts?",primaryButton:"Submit",secondaryButton:"Clear"},T={subprocessField:{title:"Subprocess",placeholder:"Please select the subprocess"},stepField:{title:"Step",placeholder:"Please select the step"},techniqueField:{title:"Technique",placeholder:"Please select/enter the technique"},subTechniqueField:{title:"",placeholder:"Please select/enter the technique"},technologyField:{title:"Treatment Technology",placeholder:"Please select/enter the technology"},fmField:{title:"Failure Mode",placeholder:"Please enter the failure mode"},effectsField:{title:"Potential Effects",placeholder:"Please select/enter the potential effects"},severityField:{title:"Severity"},causesField:{title:"Potential Causes",placeholder:"Please select/enter the potential causes"},subcausesField:{title:"",placeholder:"Please select the potential causes"},mitigationField:{title:"Mitigation Strategies",placeholder:"Please select/enter the mitigation Strategies"},submitigationField:{title:"",placeholder:"Please select the mitigation Strategies"},commentsField:{title:"Comments",placeholder:"Please enter your comments",rows:5},softwareSolutionField:{title:"Any software solution",placeholder:"Do you think of any new feature in the software would mitigate the risk of this FM?",rows:5}},D=(0,w.qj)({subprocess:"",step:"",technique:"",subtechnique:"",techniqueInput:"",subtechniqueInput:"",technology:"",technologyInput:"",failureMode:"",effect:"",effectInput:"",severity:null,severityInput:null,cause:"",subcause:"",causeInput:"",mitigation:"",submitigation:"",mitigationInput:"",comments:"",softwareSolution:""}),M=(0,w.qj)({subprocess:[{required:!0,message:"Please select the subprocess",trigger:"change"}],step:[{required:!0,message:"Please select the step",trigger:"change"}],technique:[{required:!0,message:"Please select the technique",trigger:"change"}],subtechnique:[{required:!0,message:"Please select the technique",trigger:"change"}],techniqueInput:[{required:!0,message:"Please enter the technique",trigger:"blur"}],subtechniqueInput:[{required:!0,message:"Please enter the technique",trigger:"blur"}],technology:[{required:!0,message:"Please select the technology",trigger:"change"}],technologyInput:[{required:!0,message:"Please enter the technology",trigger:"blur"}],failureMode:[{required:!0,message:"Please enter the failure mode",trigger:"change"}],severity:[{required:!0,message:"Please select the severity",trigger:"change"}],severityInput:[{required:!0,message:"Please select the severity, it should be 1 to 10",trigger:"change"}],effectInput:[{required:!0,message:`Please enter the potential effect, otherwise you can select "${bt}" in the dropdown list to skip this step`,trigger:"blur"}],subcause:[{validator:function(e,t,l){n.value&&""===t?l(new Error(`Please select the potential cause, otherwise you can select "${bt}" in the dropdown list to skip this step`)):l()},trigger:"change"}],causeInput:[{required:!0,message:`Please enter the potential cause, otherwise you can select "${bt}" in the dropdown list to skip this step`,trigger:"blur"}],submitigation:[{validator:function(e,t,l){c.value&&""===t?l(new Error(`Please select the mitigation strategy, otherwise you can select "${bt}" in the dropdown list to skip this step`)):l()},trigger:"change"}],mitigationInput:[{required:!0,message:`Please enter the mitigation strategy, otherwise you can select "${bt}" in the dropdown list to skip this step`,trigger:"blur"}]}),R=(0,f.tv)(),A=localStorage;let E=(0,w.iH)(""),B=(0,w.iH)(""),N=(0,w.iH)(!1);const O={success:"Submit successfully!",no_credentials:"Authentication credentials were not provided",err:"Something went wrong... Please try it later"};(0,s.bv)((()=>{E.value=document.body.clientWidth,window.onresize=()=>(()=>{E.value=document.body.clientWidth})()}));const Y=e=>{t.value=!0,i.value=e,l.value=!1,j.subprocess_id=e,D.step="",z()},L=e=>{l.value=!0,o.value=e,j.step_id=e,j.process_id=i.value+"-"+e,z(),Z(),$()},Z=()=>{Wt.forEach((e=>{e.subprocessId===i.value&&(p.value=!0,I.value=e.techniques,void 0!=e.subtechniques&&e.subtechniques.forEach((e=>{-1!==e.stepIds.indexOf(o.value)&&(C.value=e.techniques,g.value=!0,xt.forEach((e=>{e.process_id===j.process_id&&(T.subTechniqueField.title=e.name)})))})))}))},$=()=>{St.forEach((e=>{e.subprocessId===i.value&&(m.value=!0,F.value=e.technologies)}))},K=e=>{n.value=!0,q.value=!1,S.value=!1,D.subcause="",j.potential_causes.subcause=null,j.potential_causes.causeInput=null,kt[e].cause===vt?(S.value=!0,D.causeInput=""):kt[e].cause===bt?(S.value=!1,q.value=!0,j.potential_causes.cause=null):(S.value=!1,u.value=e,j.potential_causes.cause=kt[e].cause)},J=e=>{j.potential_causes.subcause=e},G=e=>{const[t,l]=e.split("-");r.value=!0,x.value=!1,j.potential_effect.effectInput=null,j.potential_effect.subeffect=null,j.potential_effect.severity=null,j.potential_effect.severityInput=null;const a=_t[t].effect,s=_t[t].group[l];s.subeffect===vt?(k.value=!0,D.severityInput=null,D.effectInput=""):s.subeffect===bt?(x.value=!0,k.value=!1,j.potential_effect.effect=null):(k.value=!1,H.value=s.severity,0==a.length||(j.potential_effect.effect=a),j.potential_effect.subeffect=s.subeffect)},X=e=>{j.severity=e,j.potential_effect.severity=e},Q=e=>{c.value=!0,U.value=!1,W.value=!1,D.submitigation="",j.mitigation_strategy.mitigationInput=null,j.mitigation_strategy.submitigation=null;const t=qt[e].mitigation;t===vt?(W.value=!0,D.mitigationInput=""):t===bt?(W.value=!1,U.value=!0,j.mitigation_strategy.mitigation=null):(W.value=!1,d.value=e,j.mitigation_strategy.mitigation=t)},ee=e=>{j.mitigation_strategy.submitigation=e},te=e=>{v.value=!0,D.subtechnique="",D.subtechniqueInput="",j.process_type.subtechnique=null,j.process_type.subtechniqueInput=null,j.process_type.techniqueInput=null;const t=I.value[e];t===vt?(b.value=!0,g.value?y.value=!0:y.value=!1):(b.value=!1,y.value=!1,j.process_type.technique=t)},le=e=>{const t=C.value[e];t===vt?y.value=!0:(y.value=!1,j.process_type.subtechnique=t)},ae=e=>{D.technologyInput="",j.technology.technologyInput=null;const t=F.value[e];t===vt?_.value=!0:(_.value=!1,j.technology.technology=t)},se=()=>{S.value&&(j.potential_causes.cause=null,j.potential_causes.subcause=null,j.potential_causes.causeInput=D.causeInput.trim()),k.value&&(j.potential_effect.effect=null,j.potential_effect.severity=null,j.potential_effect.effectInput=D.effectInput.trim(),j.potential_effect.severityInput=D.severityInput,j.severity=D.severityInput),W.value&&(j.mitigation_strategy.mitigation=null,j.mitigation_strategy.mitigationInput=D.mitigationInput.trim()),b.value&&(j.process_type.technique=null,j.process_type.techniqueInput=D.techniqueInput.trim()),y.value&&(j.process_type.subtechnique=null,j.process_type.subtechniqueInput=D.subtechniqueInput.trim()),_.value&&(j.technology.technology=null,j.technology.technologyInput=D.technologyInput.trim()),D.comments&&(j.comments=D.comments.trim()),D.softwareSolution&&(j.software_solution=D.softwareSolution.trim()),j.failure_mode=D.failureMode.trim()},ie=async e=>{e&&await e.validate((t=>{t&&(se(),Fe().then((e=>{N.value=e[0],B.value=e[1];let t=R.currentRoute.value.params.username;const l=A.getItem("access.isart");j.process_type=JSON.stringify(j.process_type),j.technology=JSON.stringify(j.technology),j.potential_causes=JSON.stringify(j.potential_causes),j.potential_effect=JSON.stringify(j.potential_effect),j.mitigation_strategy=JSON.stringify(j.mitigation_strategy),t==B.value&&N.value&&null!==B.value&&(de.Z.post("/api/user-fm/",j,{headers:{Authorization:"Bearer "+l}}).then((e=>{201===e.status?((0,pe.z8)({showClose:!0,message:O.success,type:"success"}),console.log(j)):(0,pe.z8)({showClose:!0,message:O.err,type:"error"})})).catch((e=>{401===e.response.status?(0,pe.z8)({showClose:!0,message:O.no_credentials,type:"error"}):(0,pe.z8)({showClose:!0,message:e.response.data,type:"error"})})),R.push({name:"user-landing"}))})).catch((e=>console.log(e))),e.resetFields())}))},oe=async e=>{e&&e.resetFields()};return(e,o)=>{const f=(0,s.up)("el-col"),j=(0,s.up)("el-row"),z=(0,s.up)("el-option"),R=(0,s.up)("el-select"),A=(0,s.up)("el-form-item"),B=(0,s.up)("el-input"),N=(0,s.up)("el-divider"),O=(0,s.up)("el-option-group"),Z=(0,s.up)("el-radio"),$=(0,s.up)("el-radio-group"),se=(0,s.up)("el-input-number"),ne=(0,s.up)("el-button"),ue=(0,s.up)("el-form"),re=(0,s.up)("el-card");return(0,s.wg)(),(0,s.iD)("div",nl,[(0,s.Wm)(re,{class:(0,h.C_)((0,w.SU)(E)>768?"px-8":"px-1")},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{class:"pb-4 items-center justify-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{span:4,class:"hidden-xs-only"},{default:(0,s.w5)((()=>[ul])),_:1}),(0,s.Wm)(f,{span:18},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"font-medium text-3xl mb-4 text-[#db2777]",innerHTML:V.title},null,8,rl),(0,s._)("div",{class:"font-light text-base",innerHTML:V.text},null,8,cl)])),_:1})])),_:1}),(0,s.Wm)(ue,{model:D,"label-position":(0,w.SU)(E)>768?"left":"top",ref_key:"ruleFormRef",ref:P,"label-width":"auto",rules:M},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{justify:"space-between",class:(0,h.C_)(["mb-4",(0,w.SU)(E)>768?"flex-row":"flex-col"])},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{xs:{span:24},span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.subprocessField.title,prop:"subprocess",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.subprocess,"onUpdate:modelValue":o[0]||(o[0]=e=>D.subprocess=e),placeholder:T.subprocessField.placeholder,class:"w-full",onChange:Y},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(ht),((e,t)=>((0,s.wg)(),(0,s.j4)(z,{key:t,label:e[0].label,value:t+1},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,s.Wm)(f,{xs:{span:24},span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.stepField.title,prop:"step",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.step,"onUpdate:modelValue":o[1]||(o[1]=e=>D.step=e),placeholder:T.stepField.placeholder,class:"w-full",disabled:!t.value,onChange:L},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(ht)[i.value-1][0].children,((e,t)=>((0,s.wg)(),(0,s.j4)(z,{key:e,label:e.label,value:t+1},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])),_:1})])),_:1},8,["class"]),l.value&&p.value?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Wm)(j,{justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.techniqueField.title,prop:"technique",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.technique,"onUpdate:modelValue":o[2]||(o[2]=e=>D.technique=e),placeholder:T.techniqueField.placeholder,class:"w-full",onChange:te},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(I.value,((e,t)=>((0,s.wg)(),(0,s.j4)(z,{key:e,label:e,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),g.value&&!y.value?((0,s.wg)(),(0,s.j4)(f,{key:0,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.subTechniqueField.title,prop:"subtechnique",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.subtechnique,"onUpdate:modelValue":o[3]||(o[3]=e=>D.subtechnique=e),placeholder:T.subTechniqueField.placeholder,class:"w-full",onChange:le,disabled:!v.value},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.value,((e,t)=>((0,s.wg)(),(0,s.j4)(z,{key:e,label:e,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])),_:1})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(j,{justify:"space-between"},{default:(0,s.w5)((()=>[b.value?((0,s.wg)(),(0,s.j4)(f,{key:0,span:12,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.techniqueField.title,prop:"techniqueInput",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{modelValue:D.techniqueInput,"onUpdate:modelValue":o[4]||(o[4]=e=>D.techniqueInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:T.techniqueField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})):(0,s.kq)("",!0),g.value&&y.value?((0,s.wg)(),(0,s.j4)(f,{key:1,span:11,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.subTechniqueField.title,prop:"subtechniqueInput",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{modelValue:D.subtechniqueInput,"onUpdate:modelValue":o[5]||(o[5]=e=>D.subtechniqueInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:T.subTechniqueField.placeholder,disabled:!v.value},null,8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])),_:1})):(0,s.kq)("",!0)])),_:1})],64)):(0,s.kq)("",!0),l.value&&m.value?((0,s.wg)(),(0,s.j4)(j,{key:1,justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.technologyField.title,prop:"technology",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.technology,"onUpdate:modelValue":o[6]||(o[6]=e=>D.technology=e),placeholder:T.technologyField.placeholder,class:"w-full",onChange:ae},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(F.value,((e,t)=>((0,s.wg)(),(0,s.j4)(z,{label:e,value:t,key:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),_.value?((0,s.wg)(),(0,s.j4)(f,{key:0,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.technologyField.title,prop:"technologyInput",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{modelValue:D.technologyInput,"onUpdate:modelValue":o[7]||(o[7]=e=>D.technologyInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:T.technologyField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0),(0,s._)("div",dl,[(0,s.Wm)(A,{label:T.fmField.title,prop:"failureMode",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{modelValue:D.failureMode,"onUpdate:modelValue":o[8]||(o[8]=e=>D.failureMode=e),autosize:{minRows:3,maxRows:5},type:"textarea",placeholder:T.fmField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label"])]),(0,s.Wm)(N,{"content-position":"center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(V.primaryDivider),1)])),_:1}),(0,s.Wm)(j,{justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.effectsField.title,prop:"effect"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.effect,"onUpdate:modelValue":o[9]||(o[9]=e=>D.effect=e),placeholder:T.effectsField.placeholder,class:"w-full",disabled:!t.value,onChange:G},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(_t),((e,t)=>((0,s.wg)(),(0,s.j4)(O,{key:t,label:e.effect,value:t},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.group,(({subeffect:e},l)=>((0,s.wg)(),(0,s.j4)(z,{label:e,value:t+"-"+l,key:e},null,8,["label","value"])))),128))])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])),_:1}),!r.value||k.value||x.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(f,{key:0,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.severityField.title,prop:"severity"},{default:(0,s.w5)((()=>[(0,s.Wm)($,{modelValue:D.severity,"onUpdate:modelValue":o[10]||(o[10]=e=>D.severity=e)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(H.value,(e=>((0,s.wg)(),(0,s.j4)(Z,{label:e,value:e,key:e,class:"mr-4",onChange:X},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1}))])),_:1}),k.value?((0,s.wg)(),(0,s.j4)(j,{key:2,justify:"space-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{span:12,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.effectsField.title,prop:"effectInput"},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{modelValue:D.effectInput,"onUpdate:modelValue":o[11]||(o[11]=e=>D.effectInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:T.effectsField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),k.value?((0,s.wg)(),(0,s.j4)(f,{key:0,span:11,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.severityField.title,prop:"severityInput"},{default:(0,s.w5)((()=>[(0,s.Wm)(se,{modelValue:D.severityInput,"onUpdate:modelValue":o[12]||(o[12]=e=>D.severityInput=e),min:1,max:10},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(j,{justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.causesField.title,prop:"cause"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.cause,"onUpdate:modelValue":o[13]||(o[13]=e=>D.cause=e),placeholder:T.causesField.placeholder,class:"w-full",onChange:K,disabled:!t.value},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(kt),((e,t)=>((0,s.wg)(),(0,s.j4)(z,{key:e.cause,label:e.cause,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])),_:1}),S.value||q.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(f,{key:0,span:11,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.subcausesField.title,prop:"subcause"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.subcause,"onUpdate:modelValue":o[14]||(o[14]=e=>D.subcause=e),placeholder:T.subcausesField.placeholder,class:"w-full",onChange:J,disabled:!t.value||!n.value},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(kt)[u.value].subcauses,((e,t)=>((0,s.wg)(),(0,s.j4)(z,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])),_:1})),S.value&&!q.value?((0,s.wg)(),(0,s.j4)(f,{key:1,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.causesField.title,prop:"causeInput",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{modelValue:D.causeInput,"onUpdate:modelValue":o[15]||(o[15]=e=>D.causeInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:T.causesField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(j,{justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.mitigationField.title,prop:"mitigation"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.mitigation,"onUpdate:modelValue":o[16]||(o[16]=e=>D.mitigation=e),placeholder:T.mitigationField.placeholder,class:"w-full",onChange:Q,disabled:!t.value},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(qt),(({mitigation:e},t)=>((0,s.wg)(),(0,s.j4)(z,{key:e,label:e,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])),_:1}),W.value||U.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(f,{key:0,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.submitigationField.title,prop:"submitigation"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{modelValue:D.submitigation,"onUpdate:modelValue":o[17]||(o[17]=e=>D.submitigation=e),placeholder:T.submitigationField.placeholder,class:"w-full",disabled:!t.value||!c.value,onChange:ee},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(qt)[d.value].submitigations,((e,t)=>((0,s.wg)(),(0,s.j4)(z,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label"])])),_:1})),W.value&&!U.value?((0,s.wg)(),(0,s.j4)(f,{key:1,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:T.mitigationField.title,prop:"mitigationInput",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{modelValue:D.mitigationInput,"onUpdate:modelValue":o[18]||(o[18]=e=>D.mitigationInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:T.mitigationField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(A,{label:T.softwareSolutionField.title,prop:"softwareSolution"},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{modelValue:D.softwareSolution,"onUpdate:modelValue":o[19]||(o[19]=e=>D.softwareSolution=e),type:"textarea",placeholder:T.softwareSolutionField.placeholder,rows:T.softwareSolutionField.rows,disabled:!t.value},null,8,["modelValue","placeholder","rows","disabled"])])),_:1},8,["label"]),(0,s.Wm)(N,{"content-position":"center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(V.secondaryDivider),1)])),_:1}),(0,s.Wm)(A,{label:T.commentsField.title,prop:"comments"},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{modelValue:D.comments,"onUpdate:modelValue":o[20]||(o[20]=e=>D.comments=e),type:"textarea",placeholder:T.commentsField.placeholder,rows:T.commentsField.rows,disabled:!t.value},null,8,["modelValue","placeholder","rows","disabled"])])),_:1},8,["label"]),(0,s.Wm)(A,{class:"mt-8 justify-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(ne,{type:"primary",plain:!0,onClick:o[21]||(o[21]=(0,a.iM)((e=>ie(P.value)),["prevent"])),class:(0,h.C_)((0,w.SU)(E)>768?"w-[30%]":"w-full mb-2")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(V.primaryButton),1)])),_:1},8,["class"]),(0,s.Wm)(ne,{onClick:o[22]||(o[22]=e=>oe(P.value)),style:(0,h.j5)((0,w.SU)(E)>768?"width:30%":"width:100%; margin-left:auto")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(V.secondaryButton),1)])),_:1},8,["style"])])),_:1})])),_:1},8,["model","label-position","rules"])])),_:1},8,["class"])])}}};const ml=(0,n.Z)(pl,[["__scopeId","data-v-35bfea84"]]);var fl=ml;const gl=e=>((0,s.dD)("data-v-6602f6ef"),e=e(),(0,s.Cn)(),e),hl={class:"header-item"},wl=gl((()=>(0,s._)("img",{src:v,width:"40"},null,-1))),vl={class:"navbar-title"},bl={class:"header-item flex-wrap justify-end"},yl=["v-show"],_l=["onClick"],kl=["onClick"],Sl=["onClick"];var Wl={__name:"AdminCenter",setup(e){const t={title:"iSART",dropdownList:{button:"Update password",fmPrimaryButton:"New user-added FMs",fmSecondaryButton:"Archived user-added FMs",feedbackButton:"Feedbacks"},primaryButton:"Sign out"},l=[{title:"Dashboard",pathname:"admin-landing",icon:"fa-user-gear",isGroup:!1},{title:"Edit Failure Mode",pathname:"new-fms",icon:"fa-list-check",isGroup:!1},{title:"User Evaluation Collections",pathname:"fm-edit",icon:"fa-comments",isGroup:!1}];let i=(0,w.iH)(!1),o=(0,w.iH)(!1),n=(0,w.iH)(""),u=(0,w.iH)(""),r=(0,w.iH)(!1),c=(0,w.iH)(!1),d=(0,w.iH)(!1);const p=(0,f.tv)(),m=localStorage,g=(0,f.yj)();let v=(0,w.iH)(0),b=(0,w.iH)(0);const y=(0,w.qj)({page:1,size:1e4,published:!1});(0,s.bv)((()=>{n.value=document.body.clientWidth,window.onresize=()=>(()=>(n.value=document.body.clientWidth,n.value<768?o.value=i.value=!0:o.value=!1))(),Fe().then((e=>{r.value=e[0],u.value=e[1];let t=p.currentRoute.value.params.username;t==u.value&&r.value&&null!==u.value?de.Z.get("/api/user-fm/",{params:y,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("access.isart")}}).then((e=>{e.data.results.forEach((e=>{new Date(e.updated).toLocaleString()!=new Date(e.created).toLocaleString()?b.value+=1:v.value+=1}))})).catch((e=>console.log(e))):c.value=!r.value})).catch((e=>console.log(e)))}));const _=(e,t=null)=>{t?p.push({name:e,params:t}):p.push({name:e})};(0,s.YP)((()=>p.currentRoute.value.fullPath),(e=>{e&&Fe().then((e=>{r.value=e[0],u.value=e[1];let t=p.currentRoute.value.params.username;null!==u.value&&t==u.value||(c.value=!r.value)})).catch((e=>console.log(e)))}));const k=()=>{m.clear(),_("login")};return(e,n)=>{const r=(0,s.up)("el-icon"),p=(0,s.up)("el-button"),m=(0,s.up)("el-dropdown-item"),f=(0,s.up)("el-badge"),S=(0,s.up)("el-dropdown-menu"),W=(0,s.up)("el-dropdown"),x=(0,s.up)("el-header"),q=(0,s.up)("el-switch"),U=(0,s.up)("font-awesome-icon"),I=(0,s.up)("el-menu-item"),C=(0,s.up)("el-sub-menu"),F=(0,s.up)("el-menu"),H=(0,s.up)("el-aside"),P=(0,s.up)("router-view"),j=(0,s.up)("el-main"),z=(0,s.up)("el-container");return(0,s.wg)(),(0,s.j4)(z,{class:"home-container"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s._)("div",hl,[wl,(0,s._)("div",vl,(0,h.zw)(t.title),1)]),(0,s._)("div",bl,[(0,s.Wm)(W,{trigger:"click"},{dropdown:(0,s.w5)((()=>[(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"clearfix",onClick:n[0]||(n[0]=e=>(0,w.dq)(d)?d.value=!(0,w.SU)(d):d=!(0,w.SU)(d))},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"el-icon--left mr-3"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(ce.I8b))])),_:1}),(0,s.Uk)((0,h.zw)(t.dropdownList.button),1)])),_:1}),(0,s.Wm)(m,{class:"clearfix",divided:"",onClick:n[1]||(n[1]=e=>_("new-fms"))},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(ce.Uos))])),_:1}),(0,s.Uk)(" "+(0,h.zw)(t.dropdownList.fmPrimaryButton)+" ",1),(0,s.Wm)(f,{class:"mark",value:(0,w.SU)(v)},null,8,["value"])])),_:1}),(0,s.Wm)(m,{class:"clearfix",onClick:n[2]||(n[2]=e=>_("new-fms"))},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(ce.O_g))])),_:1}),(0,s.Uk)(" "+(0,h.zw)(t.dropdownList.fmSecondaryButton)+" ",1),(0,s.Wm)(f,{class:"mark",value:(0,w.SU)(b)},null,8,["value"])])),_:1}),(0,s.Wm)(m,{class:"clearfix",divided:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(ce.v0C))])),_:1}),(0,s.Uk)(" "+(0,h.zw)(t.dropdownList.feedbackButton)+" ",1),(0,s.Wm)(f,{class:"mark",value:3})])),_:1})])),_:1})])),default:(0,s.w5)((()=>[(0,s.Wm)(p,{type:"danger",text:""},{default:(0,s.w5)((()=>[(0,s.Uk)(" Welcome, "+(0,h.zw)((0,w.SU)(u)),1),(0,s.Wm)(r,{class:"el-icon--right"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(ce.HXv))])),_:1})])),_:1})])),_:1}),(0,s.Wm)(p,{type:"danger",text:"",onClick:(0,a.iM)(k,["prevent"])},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"el-icon--left"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(ce.Rrw))])),_:1}),(0,s.Uk)((0,h.zw)(t.primaryButton),1)])),_:1},8,["onClick"])])])),_:1}),(0,s.Wm)(z,{class:"bg-stone-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{width:(0,w.SU)(i)?"64px":"250px"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"toggle-button","v-show":!(0,w.SU)(o)},[(0,s.Wm)(q,{modelValue:(0,w.SU)(i),"onUpdate:modelValue":n[3]||(n[3]=e=>(0,w.dq)(i)?i.value=e:i=e),class:"ml-2 flex","inline-prompt":"",style:{"--el-switch-on-color":"#db2777","--el-switch-off-color":"#db2777"},"inactive-text":"Collapse"},null,8,["modelValue"])],8,yl),(0,s.Wm)(F,{"active-text-color":"#db2777","background-color":"#475569","default-active":"1","text-color":"#fff",class:"h-full font-medium",collapse:(0,w.SU)(i),"collapse-transition":!1},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(l,(({title:e,pathname:t,icon:l,isGroup:a,subtitle:o},n)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:e},[a?((0,s.wg)(),(0,s.j4)(C,{key:0,index:n+1+""},{title:(0,s.w5)((()=>[(0,s._)("div",{onClick:e=>_(t,y),class:"w-full"},[(0,s.Wm)(U,{icon:`fa-solid ${l}`,class:"ml-2 mr-5"},null,8,["icon"]),(0,s.Uk)(" "+(0,h.zw)(e),1)],8,_l)])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o,(({title:e,pathname:t,icon:l,params:a},o)=>((0,s.wg)(),(0,s.j4)(I,{key:e,index:n+1+"-"+(o+1)},{default:(0,s.w5)((()=>[(0,s._)("div",{onClick:e=>_(t,a),class:"w-full"},[(0,s.Wm)(U,{icon:`fa-solid ${l}`,class:(0,h.C_)([(0,w.SU)(i)?"mb-5":"","mr-4"])},null,8,["icon","class"]),(0,s.Uk)(" "+(0,h.zw)(e),1)],8,kl)])),_:2},1032,["index"])))),128))])),_:2},1032,["index"])):((0,s.wg)(),(0,s.j4)(I,{key:1,index:n+1+""},{default:(0,s.w5)((()=>[(0,s._)("div",{onClick:e=>_(t,y),class:"w-full"},[(0,s.Wm)(U,{icon:`fa-solid ${l}`,class:"ml-2 mr-5"},null,8,["icon"]),(0,s.Uk)(" "+(0,h.zw)(e),1)],8,Sl)])),_:2},1032,["index"]))],64)))),64))])),_:1},8,["collapse"])])),_:1},8,["width"]),(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)(P,{key:(0,w.SU)(g).fullPath}))])),_:1})])),_:1}),(0,s.Wm)(Oe,{"reset-password-dialog-visible":(0,w.SU)(d)},null,8,["reset-password-dialog-visible"]),(0,s.Wm)(Re,{"token-expired-dialog-visible":(0,w.SU)(c)},null,8,["token-expired-dialog-visible"])])),_:1})}}};const xl=(0,n.Z)(Wl,[["__scopeId","data-v-6602f6ef"]]);var ql=xl,Ul=l.p+"img/medical-assistance.7eb87752.png",Il=l.p+"img/wreath.50553b8a.png",Cl=l(8023),Fl=l(1416),Hl=l(4858),Pl=l(7956),jl=l(5299),zl=l(8690),Vl=l(2739),Tl=l(6179),Dl=l(7740),Ml=l(9634);const Rl=e=>((0,s.dD)("data-v-398494f1"),e=e(),(0,s.Cn)(),e),Al=Rl((()=>(0,s._)("img",{src:Ul},null,-1))),El=["innerHTML"],Bl=["innerHTML"],Nl=Rl((()=>(0,s._)("img",{src:Il},null,-1)));var Ol={__name:"AdminWelcome",setup(e){const t={title:"Welcome to i-SART Administrator Dashboard",text:"Some descriptions go here..."};let l=(0,w.qj)({FMsBefore:0,FMsAfter:0,userNum:0,userAddedFMs:0,fmeaReports:0});const a=(0,w.qj)({title:"iSART Summary",statistics:[{icon:"ðŸ†",name:"Total number of FMs",text:""},{icon:"",name:'<span class="pl-4 text-gray-500">Before the release of iSART</>',text:`${l.FMsBefore}`},{icon:"",name:'<span class="pl-4 text-gray-500">After the release of iSART</>',text:`${l.FMsAfter}`},{icon:"ðŸ‘",name:"Number of registered users",text:`${l.userNum}`},{icon:"ðŸ“Š",name:"Number of user-added FMs",text:`${l.userAddedFMs}`},{icon:"ðŸ—“",name:"Number of FMEA reports user submitted",text:`${l.fmeaReports}`}]});(0,Cl.D)([Fl.N,Hl.N,zl.N,Vl.N,Tl.N,Dl.N,Pl.N,jl.N]);let i=(0,w.iH)(null),o=((0,w.iH)(null),(0,w.iH)(null)),n=(0,w.iH)(null),u=(0,w.iH)(""),r=(0,w.iH)(!1);const c=(0,w.qj)({page:1,size:1e4});let d=(0,w.iH)(null);const p={title:"Subprocess",legend:[]};let m=(0,w.qj)({value:[]});const g={title:"The Amount of FMs by Severity",legend:[]};let v=(0,w.qj)({value:[]});const b={title:"FM Severity Distribution by Subprocess",subprocessLegend:[],severityLegend:[]};let y=(0,w.qj)({value:[]});const _={title:"The Amount of FMs by Treatment Technique",legend:[]};let k=(0,w.qj)({value:[]});const S=(0,f.tv)(),W=["#C5F8C8","#FAF096","#FCCB8F","#F9989F"],x=["#8ecae6","#219ebc","#126782","#023047","#ffb703","#fd9e02","#fb8500"];(0,s.bv)((()=>{window.onresize=()=>{i.value.resize(q("pieChart","container")),o.value.resize(q("stackChart","container")),n.value.resize(q("roseChart","container"))},i.value.resize(q("pieChart","container")),o.value.resize(q("stackChart","container")),n.value.resize(q("roseChart","container")),Fe().then((e=>{r.value=e[0],u.value=e[1];let t=S.currentRoute.value.params.username;t==u.value&&r.value&&null!==u.value?(de.Z.get("/api/fm/",{params:c,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("access.isart")}}).then((e=>{a.statistics[1].text=e.data.count,d.value=e.data.results,U()})).catch((e=>console.log(e))),de.Z.get("/api/user/",{params:{page:1,size:4,is_admin:!1},headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("access.isart")}}).then((e=>{a.statistics[3].text=e.data.length})).catch((e=>console.log(e))),de.Z.get("/api/user-fm/",{params:{page:1,size:1e4},headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("access.isart")}}).then((e=>{a.statistics[4].text=e.data.count})).catch((e=>console.log(e)))):S.push({name:"admin-landing"})})).catch((e=>console.log(e)))}));const q=(e,t)=>{let l=document.getElementById(e);const a=document.getElementById(t).clientHeight,s=document.getElementById(t).clientWidth;return l.style.height=a+"px",l.style.width=s+"px",{width:s,height:a}},U=()=>{wt.forEach((e=>{const t=e.emoji+" "+e.label;v.value.push({name:t,value:0}),g.legend.push(t),y.value.push({name:t,data:[],type:"bar",stack:"x",color:W[e.value-1],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.3)"}}}),b.severityLegend.push(t)}));for(const e of gt)e.forEach((e=>{const t=e.phase+". "+e.title;m.value.push(0),p.legend.push(t),b.subprocessLegend.push(t),y.value.forEach((e=>{e.data.push(0)}))}));yt.forEach((e=>{k.value.push({name:e,value:0}),_.legend.push(e)})),d.value.forEach((e=>{m.value[e.subprocess_id-1]+=1,v.value[e.severity-1].value+=1,y.value[e.severity-1].data[e.subprocess_id-1]+=1;for(let t=0;t<yt.length;t++)yt[t]===e.process_type&&(k.value[t].value+=1)})),y.value.push({type:"line",data:m.value,smooth:!0})},I=(0,w.iH)({title:{text:g.title,left:"center",top:20},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{orient:"vertical",left:20,top:60,data:g.legend},series:[{name:g.title,type:"pie",color:W,radius:"70%",center:["50%","60%"],data:v.value,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),C=((0,w.iH)({xAxis:{data:p.legend},yAxis:{},series:[{name:p.title,type:"bar",data:m.value}]}),(0,w.iH)({title:{text:b.title,left:"center",top:20},legend:{orient:"horizontal",bottom:10,data:b.severityLegend},tooltip:{trigger:"item"},xAxis:{type:"category",axisTick:{alignWithLabel:!0},data:b.subprocessLegend},yAxis:[{type:"value",name:"Failure Modes",min:0,max:200,position:"left",axisLabel:{formatter:"{value}"}}],series:y.value})),F=(0,w.iH)({title:{text:_.title,left:"center",top:20},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{orient:"vertical",left:20,top:60,data:_.legend},series:[{name:_.title,type:"pie",color:x,radius:["35%","70%"],center:["50%","60%"],data:k.value,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});return(e,l)=>{const u=(0,s.up)("el-col"),r=(0,s.up)("el-row"),c=(0,s.up)("el-card"),d=(0,s.up)("el-carousel-item"),p=(0,s.up)("el-carousel");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"py-4 px-8 items-center justify-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{span:4},{default:(0,s.w5)((()=>[Al])),_:1}),(0,s.Wm)(u,{span:18},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"font-medium text-3xl mb-4 text-[#db2777]",innerHTML:t.title},null,8,El),(0,s._)("div",{class:"font-light text-base",innerHTML:t.text},null,8,Bl)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(r,{class:"mt-6 justify-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{span:16},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{trigger:"click",autoplay:!1,id:"container",arrow:"always"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(Ml.ZP),{option:I.value,ref_key:"pieChartRef",ref:i,id:"pieChart"},null,8,["option"])])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(Ml.ZP),{option:C.value,ref_key:"stackChartRef",ref:o,id:"stackChart"},null,8,["option"])])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(Ml.ZP),{option:F.value,ref_key:"roseChartRef",ref:n,id:"roseChart"},null,8,["option"])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(u,{span:7},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"h-full"},{header:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"justify-between items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{span:4},{default:(0,s.w5)((()=>[Nl])),_:1}),(0,s.Wm)(u,{class:"font-medium text-3xl text-center text-[#db2777]",span:18},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(a.title),1)])),_:1})])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.statistics,(({name:e,icon:t,text:l})=>((0,s.wg)(),(0,s.j4)(r,{class:"mb-2",key:t},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{span:2},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(t),1)])),_:2},1024),(0,s.Wm)(u,{class:"text-base font-medium text-gray-700",span:18,innerHTML:e},null,8,["innerHTML"]),(0,s.Wm)(u,{span:4,class:"text-[#db2777] font-light text-lg text-center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(l),1)])),_:2},1024)])),_:2},1024)))),128))])])),_:1})])),_:1})])),_:1})])}}};const Yl=(0,n.Z)(Ol,[["__scopeId","data-v-398494f1"]]);var Ll=Yl,Zl=l.p+"img/file.395cf8eb.png";const $l={class:"dialog-title"},Kl={class:"dialog-image-container"},Jl={class:"dialog-description"},Gl={style:{"margin-top":"-20px"}};var Xl={__name:"DeleteFailureModeDialog",props:{deleteFmDialogVisible:{type:Boolean,default:!1},fmId:{type:String,default:"0"}},setup(e){const t=e,{deleteFmDialogVisible:l,fmId:a}=(0,w.BK)(t);let i=(0,w.iH)(!1),o=(0,w.iH)("0");(0,s.YP)(l,(()=>{i.value=!i.value,o.value=a.value}));const n={title:"Are you sure to delete this FM?",description:"This FM will be gone forever...",primaryButton:"Confirm",secondaryButton:"Cancel"},u=(0,f.tv)(),r=localStorage;let c=(0,w.iH)(""),d=(0,w.iH)(!1);const p={delete_success:"Delete successfully!",err:"Something went wrong... Please try it later"};let m=(0,w.iH)("");(0,s.bv)((()=>{m.value=document.body.clientWidth,window.onresize=()=>(()=>{m.value=document.body.clientWidth})()}));const g=async()=>{Fe().then((e=>{d.value=e[0],c.value=e[1];let t=u.currentRoute.value.params.username;const l=r.getItem("access.isart");t==c.value&&d.value&&null!==c.value&&de.Z["delete"]("/api/user-fm/"+o.value+"/",{headers:{Authorization:"Bearer "+l}}).then((e=>{204===e.status?(0,pe.z8)({showClose:!0,message:p.delete_success,type:"success"}):(0,pe.z8)({showClose:!0,message:p.err,type:"error"})})).catch((e=>{(0,pe.z8)({showClose:!0,message:e.response.data,type:"error"})}))})).catch((e=>console.log(e))),i.value=!i.value,"new-fms"===u.currentRoute.value.name?location.reload():u.push({name:"new-fms"})};return(e,t)=>{const l=(0,s.up)("el-button"),a=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.j4)(a,{modelValue:(0,w.SU)(i),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,w.dq)(i)?i.value=e:i=e),style:(0,h.j5)((0,w.SU)(m)>=768?"width: 33%":768===(0,w.SU)(m)?"width: 50%":"width: 80%"),"align-center":"","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{header:(0,s.w5)((()=>[(0,s._)("div",$l,(0,h.zw)(n.title),1)])),footer:(0,s.w5)((()=>[(0,s._)("div",Gl,[(0,s.Wm)(l,{type:"danger",onClick:t[0]||(t[0]=e=>g()),style:(0,h.j5)((0,w.SU)(m)>768?"width:48%":"width:100%; margin-bottom:8px")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(n.primaryButton),1)])),_:1},8,["style"]),(0,s.Wm)(l,{onClick:t[1]||(t[1]=e=>(0,w.dq)(i)?i.value=!(0,w.SU)(i):i=!(0,w.SU)(i)),style:(0,h.j5)((0,w.SU)(m)>768?"width:48%":"width:100%; margin-left:auto")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(n.secondaryButton),1)])),_:1},8,["style"])])])),default:(0,s.w5)((()=>[(0,s._)("div",Kl,[(0,s._)("img",{src:Zl,style:(0,h.j5)((0,w.SU)(m)>768?"width: 8rem":"width: 6rem")},null,4)]),(0,s._)("div",Jl,(0,h.zw)(n.description),1)])),_:1},8,["modelValue","style"])}}};const Ql=Xl;var ea=Ql;const ta={class:"mt-2"},la=["innerHTML"],aa={key:0,class:"text-[#db2777]"},sa={class:"mb-8"};var ia={__name:"FailureModeEdition",setup(e){const t=(0,w.iH)(!1),l=(0,w.iH)(1),i=(0,w.iH)(!1),o=(0,w.iH)(1),n=(0,w.iH)(!1),u=(0,w.iH)(!1),r=(0,w.iH)(!1),c=(0,w.iH)(!1),d=(0,w.iH)(!1),p=(0,w.iH)(!1),m=(0,w.iH)(!1),g=(0,w.iH)(!1),v=(0,w.qj)({value:[]}),b=(0,w.qj)({value:[]}),y=(0,w.qj)({value:[]}),_=(0,w.iH)(!1),k=(0,w.iH)(0),S=(0,w.iH)(!1),W=(0,w.iH)(!1),x=(0,w.iH)(!1),q=(0,w.iH)(!1),U=(0,w.iH)(!1),I=(0,w.qj)({value:[]}),C=(0,w.iH)(!1),F=(0,w.iH)(0),H=(0,w.iH)(!1),P=(0,w.iH)(!1),j=(0,w.iH)(null),z=(0,w.qj)({subprocess_id:null,step_id:null,failure_mode:null,potential_effect:{effect:null,effectInput:null,subeffect:null,severity:null,severityInput:null},potential_causes:{cause:null,subcause:null,causeInput:null},severity:null,mitigation_strategy:{mitigation:null,submitigation:null,mitigationInput:null},process_type:{technique:null,subtechnique:null,techniqueInput:null,subtechniqueInput:null},process_id:null,published:0,comments:null,technology:{technology:null,technologyInput:null},software_solution:null}),V=(0,w.qj)({subprocess_id:null,step_id:null,failure_mode:null,potential_effect:null,severity:null,potential_causes:null,mitigation_strategy:null,process_type:null,process_id:null}),T=(0,w.qj)({Subprocess:"",Step:"",Technique:"","Failure Mode":"","User-entered Technique":"","Treatment Technology":"","User-entered Treatment Technology":"","Potential Effects":"","User-entered Potential Effects":"",Severity:null,"User-entered Severity":null,"Potential Causes":"","User-entered Potential Causes":"","Mitigation Strategies":"","User-entered Mitigation Strategies":"",Comments:"","Software Solution":""}),D=()=>{n.value=!1,u.value=!1,r.value=!1,c.value=!1,d.value=!1,p.value=!1,g.value=!1,m.value=!1,E.technique="",E.subtechnique="",E.subtechniqueInput="",E.techniqueInput="",E.technologyInput="",E.technology=""},M={title:"Edit Failure Modes Collected from Users",primaryDivider:"The bold field(s) has already been edited before",secondaryDivider:"Optional Fields",thirdDivider:"Any Further Thoughts?",primaryButton:"Submit",secondaryButton:"Save for Later",thirdButton:"Delete",lastButton:"Clear"},R={home:{title:"Back to Edit Failure Mode",pathname:"new-fms"},current:{title:"User-entered Failure Mode"}},A={subprocessField:{title:"Subprocess",placeholder:"Please select the subprocess"},stepField:{title:"Step",placeholder:"Please select the step"},techniqueField:{title:"Technique",placeholder:"Please select/enter the technique"},subTechniqueField:{title:"",placeholder:"Please select/enter the technique"},technologyField:{title:"Treatment Technology",placeholder:"Please select/enter the technology"},fmField:{title:"Failure Mode",placeholder:"Please enter the failure mode"},effectsField:{title:"Potential Effects",placeholder:"Please select/enter the potential effects"},severityField:{title:"Severity"},causesField:{title:"Potential Causes",placeholder:"Please select/enter the potential causes"},subcausesField:{title:"",placeholder:"Please select the potential causes"},mitigationField:{title:"Mitigation Strategies",placeholder:"Please select/enter the mitigation Strategies"},submitigationField:{title:"",placeholder:"Please select the mitigation Strategies"},commentsField:{title:"Comments",placeholder:"Please enter your comments",rows:5},softwareSolutionField:{title:"Any software solution",placeholder:"Do you think of any new feature in the software would mitigate the risk of this FM?",rows:5}},E=(0,w.qj)({subprocess:"",step:"",technique:"",subtechnique:"",techniqueInput:"",subtechniqueInput:"",technology:"",technologyInput:"",failureMode:"",effect:"",effectInput:"",severity:null,severityInput:null,cause:"",subcause:"",causeInput:"",mitigation:"",submitigation:"",mitigationInput:"",comments:"",softwareSolution:""}),B=(0,w.qj)({subprocess:[{required:!0,message:"Please select the subprocess",trigger:"change"}],step:[{required:!0,message:"Please select the step",trigger:"change"}],technique:[{required:!0,message:"Please select the technique",trigger:"change"}],subtechnique:[{required:!0,message:"Please select the technique",trigger:"change"}],techniqueInput:[{required:!0,message:"Please enter the technique",trigger:"blur"}],subtechniqueInput:[{required:!0,message:"Please enter the technique",trigger:"blur"}],technology:[{required:!0,message:"Please select the technology",trigger:"change"}],technologyInput:[{required:!0,message:"Please enter the technology",trigger:"blur"}],failureMode:[{required:!0,message:"Please enter the failure mode",trigger:"blur"}],severity:[{required:!0,message:"Please select the severity",trigger:"change"}],severityInput:[{required:!0,message:"Please select the severity, it should be 1 to 10",trigger:"change"}],effectInput:[{required:!0,message:`Please enter the potential effect, otherwise you can select "${bt}" in the dropdown list to skip this step`,trigger:"blur"}],subcause:[{validator:function(e,t,l){_.value&&""===t?l(new Error(`Please select the potential cause, otherwise you can select "${bt}" in the dropdown list to skip this step`)):l()},trigger:"change"}],causeInput:[{required:!0,message:`Please enter the potential cause, otherwise you can select "${bt}" in the dropdown list to skip this step`,trigger:"blur"}],submitigation:[{validator:function(e,t,l){C.value&&""===t?l(new Error(`Please select the mitigation strategy, otherwise you can select "${bt}" in the dropdown list to skip this step`)):l()},trigger:"change"}],mitigationInput:[{required:!0,message:`Please enter the mitigation strategy, otherwise you can select "${bt}" in the dropdown list to skip this step`,trigger:"blur"}]}),N=(0,f.tv)(),O=localStorage;let Y=(0,w.iH)(""),L=(0,w.iH)(""),Z=(0,w.iH)(!1);const $=N.currentRoute.value.params.id,K=(0,w.iH)(!1),J={submit_success:"Submit successfully!",save_success:"Save successfully!",err:"Something went wrong... Please try it later"};(0,s.bv)((()=>{Y.value=document.body.clientWidth,window.onresize=()=>(()=>{Y.value=document.body.clientWidth})(),qe()}));const G=(0,w.iH)(!1),X=(0,w.iH)(!1),Q=(0,w.iH)(!1),ee=(0,w.iH)(!1),te=(0,w.iH)(!1),le=(0,w.iH)(!1),ae=(0,w.iH)(!1),se=(0,w.iH)(!1),ie=(0,w.iH)(!1),oe=(0,w.iH)(!1),ne=(0,w.iH)(!1),ue=(0,w.iH)(!1),re=(0,w.iH)(!1),me=(0,w.iH)(!1),fe=(0,w.iH)(!1),ge=(0,w.iH)(!1),he=(0,w.iH)(!1),we=(0,w.iH)(!1),ve=(0,w.iH)(!1),be=(0,w.iH)(!1),ye=(0,w.iH)(!1),_e=(0,w.iH)(!1);let ke=(0,w.iH)(),Se=(0,w.iH)(),We=(0,w.iH)();const xe=(0,w.iH)(!1),qe=()=>{Fe().then((e=>{Z.value=e[0],L.value=e[1];let t=N.currentRoute.value.params.username;const l=O.getItem("access.isart");t==L.value&&Z.value&&null!==L.value?(de.Z.get(`/api/user-fm/${$}/log_created/`,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+l}}).then((e=>{ke.value=e.data,Ue()})).catch((e=>console.log(e))),de.Z.get(`/api/user-fm/${$}/log_updated/`,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+l}}).then((e=>{Se.value=e.data,de.Z.get("/api/user-fm/",{params:{id:$},headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+l}}).then((e=>{We.value=e.data[0],Ie()})).catch((e=>console.log(e)))})).catch((e=>console.log(e)))):N.push({name:"admin-landing"})})).catch((e=>console.log(e)))},Ue=()=>{const e=ke.value["subprocess_id"][1];T.Subprocess=ht[e-1][0].label;const t=ke.value["step_id"][1];T.Step=ht[e-1][0].children[t-1].label;const l=e+"-"+t;T["Failure Mode"]=ke.value["failure_mode"][1];const{technique:a,subtechnique:s,techniqueInput:i,subtechniqueInput:o}=JSON.parse(ke.value["process_type"][1]);i?T["User-entered Technique"]=i:T.Technique=a,xt.forEach((e=>{e.process_id===l&&(s?T[`${e.name}`]=s:o&&(T[`User-entered ${e.name}`]=o))}));const{technology:n,technologyInput:u}=JSON.parse(ke.value["technology"][1]);u?T["User-entered Treatment Technology"]=u:T["Treatment Technology"]=n;const{effect:r,effectInput:c,subeffect:d,severity:p}=JSON.parse(ke.value["potential_effect"][1]);if(d)T["Potential Effects"]=r?`${r}<span class="text-gray-500 pl-2">[${d}]</span>`:d,T["Severity"]=p;else if(c){T["User-entered Potential Effects"]=c;const e=ke.value["severity"][1];T["User-entered Severity"]=e}const{cause:m,subcause:f,causeInput:g}=JSON.parse(ke.value["potential_causes"][1]);m?T["Potential Causes"]=`${m}<span class="text-gray-500 pl-2">[${f}]</span>`:g&&(T["User-entered Potential Causes"]=g);const{mitigation:h,submitigation:w,mitigationInput:v}=JSON.parse(ke.value["mitigation_strategy"][1]);h?T["Mitigation Strategies"]=`${h}<span class="text-gray-500 pl-2">[${w}]</span>`:v&&(T["User-entered Mitigation Strategies"]=v),ke.value["software solution"]&&(T["Software Solution"]=ke.value["software_solution"][1]),ke.value["comments"]&&(T["Comments"]=ke.value["comments"][1])},Ie=()=>{if(Se.value["id"]||(xe.value=!0),Se.value["subprocess_id"]){const[e,t]=Se.value["subprocess_id"];Ce(e,t)}else{const e=We.value.subprocess_id;Ce("None",e)}if(Se.value["step_id"]){const[e,t]=Se.value["step_id"];He(e,t)}else{const e=We.value.step_id;He("None",e)}const e=z.process_id=l.value+"-"+o.value;if(Se.value["process_type"]){const[t,l]=Se.value["process_type"];Pe(t,l,e)}else{const t=We.value["process_type"];Pe("None",t,e)}if(Se.value["technology"]){const[e,t]=Se.value["technology"];je(e,t)}else{const e=We.value["technology"];je("None",e)}if(Se.value["failure_mode"]){const[e,t]=Se.value["failure_mode"];E.failureMode=z.failure_mode=t,"None"!==e&&(Q.value=!0)}else{const e=We.value.failure_mode;E.failureMode=z.failure_mode=e}if(Se.value["potential_effect"]){const[e,t]=Se.value["potential_effect"];ze(e,t)}else{const e=We.value.potential_effect;ze("None",e)}if(Se.value["potential_causes"]){const[e,t]=Se.value["potential_causes"];Ve(e,t)}else{const e=We.value.potential_causes;Ve("None",e)}if(Se.value["mitigation_strategy"]){const[e,t]=Se.value["mitigation_strategy"];Te(e,t)}else{const e=We.value.mitigation_strategy;Te("None",e)}if(Se.value["comments"]){const[e,t]=Se.value["comments"];Me(e,t)}else{const e=We.value.comments;Me("None",e)}if(Se.value["software_solution"]){const[e,t]=Se.value["software_solution"];De(e,t)}else{const e=We.value.software_solution;De("None",e)}},Ce=(e,a)=>{E.subprocess=z.subprocess_id=l.value=parseInt(a),t.value=!0,"None"!==e&&(G.value=!0)},He=(e,t)=>{E.step=z.step_id=o.value=parseInt(t),i.value=!0,"None"!==e&&(X.value=!0)},Pe=(e,t,l)=>{let a=null,s=null,i=null,o=null,n=!1;if("None"!==e&&(n=!0,a=JSON.parse(e).technique,s=JSON.parse(e).subtechnique,i=JSON.parse(e).techniqueInput,o=JSON.parse(e).subtechniqueInput),void 0!==t){const{technique:e,subtechnique:u,techniqueInput:m,subtechniqueInput:f}=JSON.parse(t);if((e||m)&&Ee(),m){if(m){d.value=!0,c.value=!0,z.process_type.techniqueInput=E.techniqueInput=m,xe.value&&n&&i!==m&&(te.value=!0);for(let e=0;e<v.value.length;e++)v.value[e]===vt&&(E.technique=e)}}else{z.process_type.technique=e,c.value=!0,xe.value&&n&&a!==e&&(ee.value=!0);for(let t=0;t<v.value.length;t++)v.value[t]===e&&(E.technique=t)}xt.forEach((e=>{if(e.process_id===l)if(A.subTechniqueField.title=e.name,u){z.process_type.subtechnique=u,r.value=!0,xe.value&&n&&s!==u&&(le.value=!0);for(let e=0;e<b.value.length;e++)b.value[e]===u&&(E.subtechnique=e)}else f&&(p.value=!0,r.value=!0,z.process_type.subtechniqueInput=E.subtechniqueInput=f,xe.value&&n&&o!==f&&(ae.value=!0))}))}},je=(e,t)=>{let l=null,a=null,s=!1;if("None"!==e&&(s=!0,l=JSON.parse(e).technology,a=JSON.parse(e).technologyInput),void 0!==t){const{technology:e,technologyInput:i}=JSON.parse(t);if((e||i)&&Be(),i){if(i){g.value=!0,m.value=!0,z.technology.technologyInput=E.technologyInput=i,xe.value&&s&&a!==i&&(ie.value=!0);for(let e=0;e<y.value.length;e++)y.value[e]===vt&&(E.technology=e)}}else{z.technology.technology=e,m.value=!0,xe.value&&s&&l!==e&&(se.value=!0);for(let t=0;t<y.value.length;t++)y.value[t]===e&&(E.technology=t)}}},ze=(e,t)=>{let l=null,a=null,s=null,i=null,o=null,n=!1;"None"!==e&&(n=!0,l=JSON.parse(e).effect,a=JSON.parse(e).subeffect,s=JSON.parse(e).effectInput,i=JSON.parse(e).severity,o=JSON.parse(e).severityInput);const{effect:u,subeffect:r,effectInput:c,severityInput:d}=JSON.parse(t),p=JSON.parse(t).severity;if(r||c){if(r){E.severity=z.potential_effect.severity=z.severity=p,x.value=!0,xe.value&&n&&l!==u&&(oe.value=!0),xe.value&&n&&a!==r&&(ne.value=!0),xe.value&&n&&i!==p&&(re.value=!0);for(let e=0;e<_t.length;e++)if(u===_t[e].effect||!u)for(let t=0;t<_t[e].group.length;t++)r===_t[e].group[t].subeffect&&(E.effect=e+"-"+t,I.value=_t[e].group[t].severity)}else if(c){z.potential_effect.effectInput=E.effectInput=c,z.potential_effect.severityInput=z.severity=E.severityInput=d,q.value=!0,xe.value&&n&&s!==c&&(ue.value=!0),xe.value&&n&&o!==d&&(me.value=!0);for(let e=0;e<_t.length;e++)if(0===_t[e].effect.length)for(let t=0;t<_t[e].group.length;t++)_t[e].group[t].subeffect===vt&&(E.effect=e+"-"+t)}}else for(let m=0;m<_t.length;m++)if(0===_t[m].effect.length)for(let e=0;e<_t[m].group.length;e++)_t[m].group[e].subeffect===bt&&(xe.value&&n&&l!==u&&(oe.value=!0),E.effect=m+"-"+e,U.value=!0)},Ve=(e,t)=>{let l=null,a=null,s=null,i=!1;"None"!==e&&(i=!0,l=JSON.parse(e).cause,a=JSON.parse(e).causeInput,s=JSON.parse(e).subcause);const{cause:o,causeInput:n,subcause:u}=JSON.parse(t);if(o||n){if(o){z.potential_causes.cause=o,z.potential_causes.subcause=u,_.value=!0,xe.value&&i&&l!==o&&(fe.value=!0),xe.value&&i&&s!==u&&(ge.value=!0);for(let e=0;e<kt.length;e++)if(o===kt[e].cause){E.cause=k.value=e;for(let t=0;t<kt[e].subcauses.length;t++)u===kt[e].subcauses[t]&&(E.subcause=kt[e].subcauses[t])}}else if(n){z.potential_causes.causeInput=E.causeInput=n,S.value=!0,xe.value&&i&&a!==n&&(he.value=!0);for(let e=0;e<kt.length;e++)kt[e].cause===vt&&(E.cause=e)}}else for(let r=0;r<kt.length;r++)kt[r].cause===bt&&(xe.value&&i&&l!==o&&(fe.value=!0),E.cause=r,W.value=!0)},Te=(e,t)=>{let l=null,a=null,s=null,i=!1;"None"!==e&&(i=!0,l=JSON.parse(e).mitigation,a=JSON.parse(e).submitigation,s=JSON.parse(e).mitigationInput);const{mitigation:o,submitigation:n,mitigationInput:u}=JSON.parse(t);if(o||u){if(o){z.mitigation_strategy.mitigation=o,z.mitigation_strategy.submitigation=n,C.value=!0,xe.value&&i&&l!==o&&(we.value=!0),xe.value&&i&&a!==n&&(ve.value=!0);for(let e=0;e<qt.length;e++)if(o===qt[e].mitigation){E.mitigation=F.value=e;for(let t=0;t<qt[e].submitigations.length;t++)n===qt[e].submitigations[t]&&(E.submitigation=qt[e].submitigations[t])}}else if(u){z.mitigation_strategy.mitigationInput=E.mitigationInput=u,H.value=!0,xe.value&&i&&s!==u&&(be.value=!0);for(let e=0;e<qt.length;e++)qt[e].mitigation===vt&&(E.mitigation=e)}}else for(let r=0;r<qt.length;r++)qt[r].mitigation===bt&&(xe.value&&i&&l!==o&&(we.value=!0),E.mitigation=r,P.value=!0)},De=(e,t)=>{E.softwareSolution=t||"",z.software_solution=t,"None"!==e&&(ye.value=!0)},Me=(e,t)=>{E.comments=t||"",z.comments=t,"None"!==e&&(_e.value=!0)},Re=e=>{t.value=!0,l.value=e,i.value=!1,z.subprocess_id=e,E.step="",D()},Ae=e=>{i.value=!0,o.value=e,z.step_id=e,z.process_id=l.value+"-"+e,D(),Ee(),Be()},Ee=()=>{Wt.forEach((e=>{e.subprocessId===l.value&&(n.value=!0,v.value=e.techniques,void 0!=e.subtechniques&&e.subtechniques.forEach((e=>{-1!==e.stepIds.indexOf(o.value)&&(b.value=e.techniques,r.value=!0,xt.forEach((e=>{e.process_id===z.process_id&&(A.subTechniqueField.title=e.name,T[`User-entered ${e.name}`]="",T[`${e.name}`]="")})))})))}))},Be=()=>{St.forEach((e=>{e.subprocessId===l.value&&(u.value=!0,y.value=e.technologies)}))},Ne=e=>{_.value=!0,W.value=!1,S.value=!1,E.subcause="",z.potential_causes.subcause=null,z.potential_causes.causeInput=null,kt[e].cause===vt?(S.value=!0,E.causeInput=""):kt[e].cause===bt?(W.value=!0,W.value=!0,z.potential_causes.cause=null):(S.value=!1,k.value=e,z.potential_causes.cause=kt[e].cause)},Oe=e=>{z.potential_causes.subcause=e},Ye=e=>{const[t,l]=e.split("-");x.value=!0,U.value=!1,z.potential_effect.effectInput=null,z.potential_effect.subeffect=null,z.potential_effect.severity=null,z.potential_effect.severityInput=null;const a=_t[t].effect,s=_t[t].group[l];s.subeffect===vt?(q.value=!0,E.severityInput=null,E.effectInput=""):s.subeffect===bt?(U.value=!0,q.value=!1,z.potential_effect.effect=null):(q.value=!1,I.value=s.severity,0==a.length||(z.potential_effect.effect=a),z.potential_effect.subeffect=s.subeffect)},Le=e=>{z.severity=e,z.potential_effect.severity=e},Ze=e=>{C.value=!0,P.value=!1,H.value=!1,E.submitigation="",z.mitigation_strategy.mitigationInput=null,z.mitigation_strategy.submitigation=null;const t=qt[e].mitigation;t===vt?(H.value=!0,E.mitigationInput=""):t===bt?(H.value=!1,P.value=!0,z.mitigation_strategy.mitigation=null):(H.value=!1,F.value=e,z.mitigation_strategy.mitigation=t)},$e=e=>{z.mitigation_strategy.submitigation=e},Ke=e=>{c.value=!0,E.subtechnique="",E.subtechniqueInput="",z.process_type.subtechnique=null,z.process_type.subtechniqueInput=null,z.process_type.techniqueInput=null;const t=v.value[e];t===vt?(d.value=!0,r.value?p.value=!0:p.value=!1):(d.value=!1,p.value=!1,z.process_type.technique=t)},Je=e=>{const t=b.value[e];t===vt?(xt.forEach((e=>{e.process_id===z.process_id&&(A.subTechniqueField.title=e.name)})),p.value=!0):(p.value=!1,z.process_type.subtechnique=t)},Ge=e=>{m.value=!0,E.technologyInput="",z.technology.technologyInput=null;const t=y.value[e];t===vt?g.value=!0:(g.value=!1,z.technology.technology=t)},Xe=()=>{S.value&&(z.potential_causes.cause=null,z.potential_causes.subcause=null,z.potential_causes.causeInput=E.causeInput.trim()),q.value&&(z.potential_effect.effect=null,z.potential_effect.severity=null,z.potential_effect.effectInput=E.effectInput.trim(),z.potential_effect.severityInput=E.severityInput,z.severity=E.severityInput),H.value&&(z.mitigation_strategy.mitigation=null,z.mitigation_strategy.mitigationInput=E.mitigationInput.trim()),d.value&&(z.process_type.technique=null,z.process_type.techniqueInput=E.techniqueInput.trim()),p.value&&(z.process_type.subtechnique=null,z.process_type.subtechniqueInput=E.subtechniqueInput.trim()),g.value&&(z.technology.technology=null,z.technology.technologyInput=E.technologyInput.trim()),E.comments&&(z.comments=E.comments.trim()),E.softwareSolution&&(z.software_solution=E.softwareSolution.trim()),z.failure_mode=E.failureMode.trim()},Qe=()=>{if(Xe(),V.subprocess_id=z.subprocess_id,V.step_id=z.step_id,V.process_id=z.process_id,tt(),V.severity=z.severity,V.failure_mode=z.failure_mode,z.process_type){let e=[];Object.values(z.process_type).forEach((t=>{t&&e.push(t)})),V.process_type=e,V.process_type=JSON.stringify(V.process_type)}z.potential_effect&&(z.potential_effect.subeffect?V.potential_effect=z.potential_effect.effect?z.potential_effect.effect+": "+z.potential_effect.subeffect:z.potential_effect.subeffect:z.potential_effect.effectInput&&(V.potential_effect=z.potential_effect.effectInput)),z.potential_causes&&(z.potential_causes.cause?V.potential_causes=z.potential_causes.cause+": "+z.potential_causes.subcause:z.potential_causes.causeInput&&(V.potential_causes=z.potential_causes.causeInput)),z.mitigation_strategy&&(z.mitigation_strategy.mitigation?V.mitigation_strategy=z.mitigation_strategy.mitigation+": "+z.mitigation_strategy.submitigation:z.mitigation_strategy.mitigationInput&&(V.mitigation_strategy=z.mitigation_strategy.mitigationInput))},et=()=>{const e=["mitigation_strategy","potential_causes","potential_effect","process_type","technology"];for(const t of e)z[t]=JSON.stringify(z[t])},tt=()=>{z.severity&&(z.severity<4?z.severity=1:z.severity<7?z.severity=2:z.severity<9?z.severity=3:z.severity=4)},lt=async e=>{e&&await e.validate((t=>{t&&(Qe(),et(),Fe().then((e=>{Z.value=e[0],L.value=e[1];let t=N.currentRoute.value.params.username;const l=O.getItem("access.isart");t==L.value&&Z.value&&null!==L.value?de.Z.post("/api/fm/",V,{headers:{Authorization:"Bearer "+l}}).then((e=>{201===e.status?(z.published=!0,de.Z.put("/api/user-fm/"+$+"/",z,{headers:{Authorization:"Bearer "+l}}).then((e=>{200===e.status?(0,pe.z8)({showClose:!0,message:J.submit_success,type:"success"}):(0,pe.z8)({showClose:!0,message:J.err,type:"error"})})).catch((e=>{(0,pe.z8)({showClose:!0,message:e.response.data,type:"error"})}))):(0,pe.z8)({showClose:!0,message:J.err,type:"error"}),N.push({name:"new-fms"})})).catch((e=>{(0,pe.z8)({showClose:!0,message:e.response.data,type:"error"}),N.push({name:"new-fms"})})):N.push({name:"admin-landing"})})).catch((e=>console.log(e))),e.resetFields())}))},at=async e=>{e&&await e.validate((t=>{t&&(Xe(),et(),Fe().then((e=>{Z.value=e[0],L.value=e[1];let t=N.currentRoute.value.params.username;const l=O.getItem("access.isart");t==L.value&&Z.value&&null!==L.value?(de.Z.put("/api/user-fm/"+$+"/",z,{headers:{Authorization:"Bearer "+l}}).then((e=>{200===e.status?(0,pe.z8)({showClose:!0,message:J.save_success,type:"success"}):(0,pe.z8)({showClose:!0,message:J.err,type:"error"})})).catch((e=>{(0,pe.z8)({showClose:!0,message:e.response.data,type:"error"})})),N.push({name:"new-fms"})):N.push({name:"admin-landing"})})).catch((e=>console.log(e))),e.resetFields())}))},st=async e=>{e&&e.resetFields()};return(e,o)=>{const m=(0,s.up)("el-icon"),f=(0,s.up)("el-breadcrumb-item"),z=(0,s.up)("el-breadcrumb"),V=(0,s.up)("el-col"),D=(0,s.up)("el-row"),N=(0,s.up)("el-divider"),O=(0,s.up)("el-option"),L=(0,s.up)("el-select"),Z=(0,s.up)("el-form-item"),J=(0,s.up)("el-input"),ne=(0,s.up)("el-option-group"),de=(0,s.up)("el-radio"),pe=(0,s.up)("el-radio-group"),ke=(0,s.up)("el-input-number"),Se=(0,s.up)("el-button"),We=(0,s.up)("el-form"),xe=(0,s.up)("el-card");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(xe,{class:(0,h.C_)((0,w.SU)(Y)>768?"px-8":"px-1")},{default:(0,s.w5)((()=>[(0,s._)("div",ta,[(0,s._)("div",{class:"font-medium text-3xl mb-4 text-[#db2777] text-center",innerHTML:M.title},null,8,la),(0,s.Wm)(z,{"separator-icon":(0,w.SU)(ce.olP),class:"mb-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{to:{name:R.home.pathname}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{style:{"vertical-align":"middle"},size:"24px",color:"#db2777"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,w.SU)(ce.Ozs))])),_:1})])),_:1},8,["to"]),(0,s.Wm)(f,{class:"font-semibold text-lg text-[#475569]"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(R.current.title),1)])),_:1})])),_:1},8,["separator-icon"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(T,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[(0,s.Wm)(D,{class:"justify-between"},{default:(0,s.w5)((()=>[e?((0,s.wg)(),(0,s.j4)(V,{key:0,span:6,class:"font-semibold italic text-gray-700 mb-1"},{default:(0,s.w5)((()=>[-1!==t.indexOf("User-entered")?((0,s.wg)(),(0,s.iD)("div",aa,(0,h.zw)(t),1)):((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s.Uk)((0,h.zw)(t),1)],64))])),_:2},1024)):(0,s.kq)("",!0),(0,s.Wm)(V,{span:16,innerHTML:e},null,8,["innerHTML"])])),_:2},1024)])))),128))]),(0,s.Wm)(N,{"content-position":"center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(M.primaryDivider),1)])),_:1}),(0,s.Wm)(We,{model:E,"label-position":(0,w.SU)(Y)>768?"left":"top",ref_key:"ruleFormRef",ref:j,"label-width":"auto",rules:B},{default:(0,s.w5)((()=>[(0,s.Wm)(D,{justify:"space-between",class:(0,h.C_)(["mb-4",(0,w.SU)(Y)>768?"flex-row":"flex-col"])},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{xs:{span:24},span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.subprocessField.title,prop:"subprocess",required:"",class:(0,h.C_)(G.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.subprocess,"onUpdate:modelValue":o[0]||(o[0]=e=>E.subprocess=e),placeholder:A.subprocessField.placeholder,class:"w-full",onChange:Re},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(ht),((e,t)=>((0,s.wg)(),(0,s.j4)(O,{key:t,label:e[0].label,value:t+1},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label","class"])])),_:1}),(0,s.Wm)(V,{xs:{span:24},span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.stepField.title,prop:"step",required:""},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.step,"onUpdate:modelValue":o[1]||(o[1]=e=>E.step=e),placeholder:A.stepField.placeholder,class:(0,h.C_)(["w-full",X.value?"font-semibold":""]),disabled:!t.value,onChange:Ae},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(ht)[l.value-1][0].children,((e,t)=>((0,s.wg)(),(0,s.j4)(O,{key:e,label:e.label,value:t+1},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled","class"])])),_:1},8,["label"])])),_:1})])),_:1},8,["class"]),i.value&&n.value?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Wm)(D,{justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.techniqueField.title,prop:"technique",required:"",class:(0,h.C_)(ee.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.technique,"onUpdate:modelValue":o[2]||(o[2]=e=>E.technique=e),placeholder:A.techniqueField.placeholder,class:"w-full",onChange:Ke},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.value,((e,t)=>((0,s.wg)(),(0,s.j4)(O,{key:e,label:e,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label","class"])])),_:1}),r.value&&!p.value?((0,s.wg)(),(0,s.j4)(V,{key:0,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.subTechniqueField.title,prop:"subtechnique",required:"",class:(0,h.C_)(le.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.subtechnique,"onUpdate:modelValue":o[3]||(o[3]=e=>E.subtechnique=e),placeholder:A.subTechniqueField.placeholder,class:"w-full",onChange:Je,disabled:!c.value},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.value,((e,t)=>((0,s.wg)(),(0,s.j4)(O,{key:e,label:e,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label","class"])])),_:1})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(D,{justify:"space-between"},{default:(0,s.w5)((()=>[d.value?((0,s.wg)(),(0,s.j4)(V,{key:0,span:12,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.techniqueField.title,prop:"techniqueInput",required:"",class:(0,h.C_)(te.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{modelValue:E.techniqueInput,"onUpdate:modelValue":o[4]||(o[4]=e=>E.techniqueInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:A.techniqueField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label","class"])])),_:1})):(0,s.kq)("",!0),r.value&&p.value?((0,s.wg)(),(0,s.j4)(V,{key:1,span:11,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.subTechniqueField.title,prop:"subtechniqueInput",required:"",class:(0,h.C_)(ae.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{modelValue:E.subtechniqueInput,"onUpdate:modelValue":o[5]||(o[5]=e=>E.subtechniqueInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:A.subTechniqueField.placeholder,disabled:!c.value},null,8,["modelValue","placeholder","disabled"])])),_:1},8,["label","class"])])),_:1})):(0,s.kq)("",!0)])),_:1})],64)):(0,s.kq)("",!0),i.value&&u.value?((0,s.wg)(),(0,s.j4)(D,{key:1,justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.technologyField.title,prop:"technology",required:"",class:(0,h.C_)(se.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.technology,"onUpdate:modelValue":o[6]||(o[6]=e=>E.technology=e),placeholder:A.technologyField.placeholder,class:"w-full",onChange:Ge},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(y.value,((e,t)=>((0,s.wg)(),(0,s.j4)(O,{label:e,value:t,key:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label","class"])])),_:1}),g.value?((0,s.wg)(),(0,s.j4)(V,{key:0,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.technologyField.title,prop:"technologyInput",required:"",class:(0,h.C_)(ie.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{modelValue:E.technologyInput,"onUpdate:modelValue":o[7]||(o[7]=e=>E.technologyInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:A.technologyField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label","class"])])),_:1})):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0),(0,s._)("div",sa,[(0,s.Wm)(Z,{label:A.fmField.title,prop:"failureMode",required:"",class:(0,h.C_)(Q.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{modelValue:E.failureMode,"onUpdate:modelValue":o[8]||(o[8]=e=>E.failureMode=e),autosize:{minRows:3,maxRows:5},type:"textarea",placeholder:A.fmField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label","class"])]),(0,s.Wm)(N,{"content-position":"center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(M.secondaryDivider),1)])),_:1}),(0,s.Wm)(D,{justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.effectsField.title,prop:"effect",class:(0,h.C_)(oe.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.effect,"onUpdate:modelValue":o[9]||(o[9]=e=>E.effect=e),placeholder:A.effectsField.placeholder,class:"w-full",disabled:!t.value,onChange:Ye},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(_t),((e,t)=>((0,s.wg)(),(0,s.j4)(ne,{key:t,label:e.effect,value:t},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.group,(({subeffect:e},l)=>((0,s.wg)(),(0,s.j4)(O,{label:e,value:t+"-"+l,key:e},null,8,["label","value"])))),128))])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label","class"])])),_:1}),!x.value||q.value||U.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(V,{key:0,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.severityField.title,prop:"severity",class:(0,h.C_)(re.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(pe,{modelValue:E.severity,"onUpdate:modelValue":o[10]||(o[10]=e=>E.severity=e)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(I.value,(e=>((0,s.wg)(),(0,s.j4)(de,{label:e,value:e,key:e,class:"mr-4",onChange:Le},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label","class"])])),_:1}))])),_:1}),q.value?((0,s.wg)(),(0,s.j4)(D,{key:2,justify:"space-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{span:12,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.effectsField.title,prop:"effectInput",class:(0,h.C_)(ue.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{modelValue:E.effectInput,"onUpdate:modelValue":o[11]||(o[11]=e=>E.effectInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:A.effectsField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label","class"])])),_:1}),q.value?((0,s.wg)(),(0,s.j4)(V,{key:0,span:11,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.severityField.title,prop:"severityInput",class:(0,h.C_)(me.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(ke,{modelValue:E.severityInput,"onUpdate:modelValue":o[12]||(o[12]=e=>E.severityInput=e),min:1,max:10},null,8,["modelValue"])])),_:1},8,["label","class"])])),_:1})):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(D,{justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.causesField.title,prop:"cause",class:(0,h.C_)(fe.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.cause,"onUpdate:modelValue":o[13]||(o[13]=e=>E.cause=e),placeholder:A.causesField.placeholder,class:"w-full",onChange:Ne,disabled:!t.value},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(kt),((e,t)=>((0,s.wg)(),(0,s.j4)(O,{key:e.cause,label:e.cause,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label","class"])])),_:1}),S.value||W.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(V,{key:0,span:11,class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.subcausesField.title,prop:"subcause",class:(0,h.C_)(ge.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.subcause,"onUpdate:modelValue":o[14]||(o[14]=e=>E.subcause=e),placeholder:A.subcausesField.placeholder,class:"w-full",onChange:Oe,disabled:!t.value||!_.value},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(kt)[k.value].subcauses,((e,t)=>((0,s.wg)(),(0,s.j4)(O,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label","class"])])),_:1})),S.value&&!W.value?((0,s.wg)(),(0,s.j4)(V,{key:1,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.causesField.title,prop:"causeInput",required:"",class:(0,h.C_)(he.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{modelValue:E.causeInput,"onUpdate:modelValue":o[15]||(o[15]=e=>E.causeInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:A.causesField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label","class"])])),_:1})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(D,{justify:"space-between",class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{span:12},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.mitigationField.title,prop:"mitigation",class:(0,h.C_)(we.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.mitigation,"onUpdate:modelValue":o[16]||(o[16]=e=>E.mitigation=e),placeholder:A.mitigationField.placeholder,class:"w-full",onChange:Ze,disabled:!t.value},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(qt),(({mitigation:e},t)=>((0,s.wg)(),(0,s.j4)(O,{key:e,label:e,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label","class"])])),_:1}),H.value||P.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(V,{key:0,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.submitigationField.title,prop:"submitigation",class:(0,h.C_)(ve.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{modelValue:E.submitigation,"onUpdate:modelValue":o[17]||(o[17]=e=>E.submitigation=e),placeholder:A.submitigationField.placeholder,class:"w-full",disabled:!t.value||!C.value,onChange:$e},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,w.SU)(qt)[F.value].submitigations,((e,t)=>((0,s.wg)(),(0,s.j4)(O,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])])),_:1},8,["label","class"])])),_:1})),H.value&&!P.value?((0,s.wg)(),(0,s.j4)(V,{key:1,span:11},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{label:A.mitigationField.title,prop:"mitigationInput",required:"",class:(0,h.C_)(be.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{modelValue:E.mitigationInput,"onUpdate:modelValue":o[18]||(o[18]=e=>E.mitigationInput=e),autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:A.mitigationField.placeholder},null,8,["modelValue","placeholder"])])),_:1},8,["label","class"])])),_:1})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(Z,{label:A.softwareSolutionField.title,prop:"softwareSolution",class:(0,h.C_)(ye.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{modelValue:E.softwareSolution,"onUpdate:modelValue":o[19]||(o[19]=e=>E.softwareSolution=e),type:"textarea",placeholder:A.softwareSolutionField.placeholder,rows:A.softwareSolutionField.rows},null,8,["modelValue","placeholder","rows"])])),_:1},8,["label","class"]),(0,s.Wm)(N,{"content-position":"center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(M.thirdDivider),1)])),_:1}),(0,s.Wm)(Z,{label:A.commentsField.title,prop:"comments",class:(0,h.C_)(_e.value?"font-semibold":"")},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{modelValue:E.comments,"onUpdate:modelValue":o[20]||(o[20]=e=>E.comments=e),type:"textarea",placeholder:A.commentsField.placeholder,rows:A.commentsField.rows},null,8,["modelValue","placeholder","rows"])])),_:1},8,["label","class"]),(0,s.Wm)(Z,{class:"mt-8 justify-between mb-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(Se,{type:"primary",plain:!0,onClick:o[21]||(o[21]=(0,a.iM)((e=>lt(j.value)),["prevent"])),class:(0,h.C_)((0,w.SU)(Y)>768?"w-[20%]":"w-full ")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(M.primaryButton),1)])),_:1},8,["class"]),(0,s.Wm)(Se,{type:"warning",plain:!0,onClick:o[22]||(o[22]=(0,a.iM)((e=>at(j.value)),["prevent"])),class:(0,h.C_)((0,w.SU)(Y)>768?"w-[20%]":"w-full ")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(M.secondaryButton),1)])),_:1},8,["class"]),(0,s.Wm)(Se,{type:"danger",plain:!0,onClick:o[23]||(o[23]=e=>K.value=!K.value),class:(0,h.C_)((0,w.SU)(Y)>768?"w-[20%]":"w-full")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(M.thirdButton),1)])),_:1},8,["class"]),(0,s.Wm)(Se,{onClick:o[24]||(o[24]=e=>st(j.value)),style:(0,h.j5)((0,w.SU)(Y)>768?"width:20%":"width:100%; margin-left:auto")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(M.lastButton),1)])),_:1},8,["style"])])),_:1})])),_:1},8,["model","label-position","rules"])])),_:1},8,["class"]),(0,s.Wm)(ea,{"delete-fm-dialog-visible":K.value,fmId:(0,w.SU)($)},null,8,["delete-fm-dialog-visible","fmId"])])}}};const oa=(0,n.Z)(ia,[["__scopeId","data-v-230567a6"]]);var na=oa,ua=l.p+"img/thermometer.d80d88e8.png";const ra=e=>((0,s.dD)("data-v-70c85b2d"),e=e(),(0,s.Cn)(),e),ca=ra((()=>(0,s._)("img",{src:ua},null,-1))),da=["innerHTML"],pa=["innerHTML"];var ma={__name:"NewFailureModeList",setup(e){const t=(0,f.tv)();let l=(0,w.iH)(),i=(0,w.iH)(null),o=(0,w.iH)(""),n=(0,w.iH)(!1),u=(0,w.iH)(""),r=(0,w.iH)(!1),c=(0,w.iH)(null);const d={title:"User Added Failure Modes",text:"Some description goes here .....",primaryDivider:"Failure Mode Table",primaryButton:"Details",secondaryButton:"Delete"},p=(0,w.qj)({currentPage:1,count:0,perPage:0,totalPages:1}),m=[{name:"subprocess_id",label:"Subprocess"},{name:"step_id",label:"Step"},{name:"failure_mode",label:"Failure mode"},{name:"comments",label:"Comments"},{name:"operation",label:"Operations"},{name:"status",label:"Status"}],g=(0,w.qj)({page:1,size:4,published:!1}),v=["New","Archived"];let b=(0,w.qj)({value:[]});(0,s.bv)((()=>{u.value=document.body.clientWidth,window.onresize=()=>(()=>{u.value=document.body.clientWidth})(),y()}));const y=()=>{Fe().then((e=>{n.value=e[0],o.value=e[1];let a=t.currentRoute.value.params.username;a==o.value&&n.value&&null!==o.value?de.Z.get("/api/user-fm/",{params:g,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("access.isart")}}).then((e=>{l.value=e.data.results,p.perPage=e.data.per_page,p.count=e.data.count,p.currentPage=e.data.page_number,p.totalPages=e.data.total_pages,_()})).catch((e=>console.log(e))):t.push({name:"admin-landing"})})).catch((e=>console.log(e)))},_=()=>{l.value.forEach((e=>{e.step_id=ht[e.subprocess_id-1][0].children[e.step_id-1].label,e.subprocess_id=ht[e.subprocess_id-1][0].label,e.status=new Date(e.created).toLocaleString()===new Date(e.updated).toLocaleString()?v[0]:v[1],-1===b.value.indexOf(e.process_id)&&b.value.push(e.process_id)}))},k=e=>{(e>p.currentPage&&e<=p.totalPages||e<p.currentPage&&e>=0)&&(p.currentPage=g.page=e,y())},S=()=>{let e=[];return b.value.forEach((t=>{let[l,a]=t.split("-");l=parseInt(l),a=parseInt(a);const s=ht[l-1][0].children;for(let i=0;i<s.length;i++)i+1===a&&e.push({text:s[i].label,value:l+"-"+(i+1)})})),e},W=e=>{if(e["step_id"]){let t=[];e.step_id.forEach((e=>{t.push(e)})),g["process_id"]=t.join(",")}else g["process_id"]=void 0,g["step_id"]=void 0;g.page=1,y()},x=e=>{t.push({name:"fm-edit",params:{id:e.id}})},q=async e=>{c.value=e.id+"",r.value=!r.value},U=()=>({color:"#475569",fontSize:"medium"}),I=e=>{const t="status"===e.prop?"updated":e.prop;let l=e.order;g["ordering"]="ascending"===l?t+",":"descending"===l?"-"+t+",":void 0,g["page"]=1,y(!1)};return(e,t)=>{const o=(0,s.up)("el-col"),n=(0,s.up)("el-row"),f=(0,s.up)("el-divider"),g=(0,s.up)("el-pagination"),b=(0,s.up)("el-table-column"),y=(0,s.up)("el-tag"),_=(0,s.up)("el-button"),C=(0,s.up)("el-table"),F=(0,s.up)("el-card");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(F,{class:(0,h.C_)((0,w.SU)(u)>768?"px-8":"px-1")},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{class:"items-center justify-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{span:4,class:"hidden-xs-only"},{default:(0,s.w5)((()=>[ca])),_:1}),(0,s.Wm)(o,{span:18,class:"justify"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"font-medium text-3xl mb-4 text-[#db2777]",innerHTML:d.title},null,8,da),(0,s._)("div",{class:"font-light text-base",innerHTML:d.text},null,8,pa)])),_:1})])),_:1}),(0,s.Wm)(f,{"content-position":"center"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(d.primaryDivider),1)])),_:1}),(0,s.Wm)(n,{class:"pb-4 items-center justify-between"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{layout:"prev, pager, next, jumper",total:p.count,"page-size":p.perPage,"current-page":p.currentPage,onCurrentChange:k,"hide-on-single-page":1!=p.page_number},null,8,["total","page-size","current-page","hide-on-single-page"])])),_:1}),(0,s.Wm)(C,{data:(0,w.SU)(l),"highligh-current-row":"",stripe:"",border:!0,"header-row-style":U,ref_key:"tableRef",ref:i,onSortChange:I,onFilterChange:W},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(m,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},["failure_mode"===e.name?((0,s.wg)(),(0,s.j4)(b,{key:0,prop:e.name,label:e.label,fixed:""},null,8,["prop","label"])):"step_id"===e.name?((0,s.wg)(),(0,s.j4)(b,{key:1,prop:e.name,label:e.label,"column-key":"step_id",filters:S()},null,8,["prop","label","filters"])):"status"===e.name?((0,s.wg)(),(0,s.j4)(b,{key:2,prop:e.name,label:e.label,width:"100px","filter-placement":"bottom-end","column-key":"status",sortable:"custom"},{default:(0,s.w5)((e=>[(0,s.Wm)(y,{type:e.row.status===v[0]?"danger":"success","disable-transitions":""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(e.row.status),1)])),_:2},1032,["type"])])),_:2},1032,["prop","label"])):"operation"===e.name?((0,s.wg)(),(0,s.j4)(b,{key:3,fixed:"right",label:e.label},{default:(0,s.w5)((e=>[(0,s.Wm)(_,{size:"small",onClick:t=>x(e.row)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(d.primaryButton),1)])),_:2},1032,["onClick"]),(0,s.Wm)(_,{size:"small",type:"danger",onClick:(0,a.iM)((t=>q(e.row)),["prevent"])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,h.zw)(d.secondaryButton),1)])),_:2},1032,["onClick"])])),_:2},1032,["label"])):((0,s.wg)(),(0,s.j4)(b,{key:4,prop:e.name,label:e.label},null,8,["prop","label"]))],64)))),64))])),_:1},8,["data"])])),_:1},8,["class"]),(0,s.Wm)(ea,{"delete-fm-dialog-visible":(0,w.SU)(r),fmId:(0,w.SU)(c)},null,8,["delete-fm-dialog-visible","fmId"])])}}};const fa=(0,n.Z)(ma,[["__scopeId","data-v-70c85b2d"]]);var ga=fa;const ha=[{path:"/",name:"home",component:ue},{path:"/login",name:"login",component:Ie},{path:"/signup",name:"signup",component:ft},{path:"/admin/:username",component:ql,children:[{path:"",name:"admin-landing",component:Ll},{path:"new-fms",name:"new-fms",component:ga},{path:"fm-edit/:id(\\d+)",name:"fm-edit",component:na}]},{path:"/user/:username",component:st,children:[{path:"",name:"user-landing",component:sl},{path:"fm-list",name:"fm-list",component:Tt},{path:"fm-detail/:process_ids(\\d+)*",name:"fm-detail",component:jt},{path:"fm-create",name:"fm-create",component:fl},{path:"fmea",name:"fmea",component:Nt}]},{path:"/:pathMatch(.*)*",name:"not-found",component:$t}],wa=(0,f.p7)({history:(0,f.PO)(),routes:ha});var va=wa;d.vI.add(m.FU$,m.xiG,m.g82,m.Y$T,m.gMD,m.iDc,m.ILF,m.J9Y,m.Xcf,m.eFW,m.DBf,m.X8G,m.t3U,m.uI9,m.WZW,m.G_j,m.jMV,m.V_U,m.ZWV,m.lXL,m.wp6,m.x58);const ba=(0,a.ri)(r);ba.use(c.Z).use(va).component("font-awesome-icon",p.GN).mount("#app")}},t={};function l(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,l),i.exports}l.m=e,function(){var e=[];l.O=function(t,a,s,i){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],s=e[c][1],i=e[c][2];for(var n=!0,u=0;u<a.length;u++)(!1&i||o>=i)&&Object.keys(l.O).every((function(e){return l.O[e](a[u])}))?a.splice(u--,1):(n=!1,i<o&&(o=i));if(n){e.splice(c--,1);var r=s();void 0!==r&&(t=r)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,s,i]}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p="/"}(),function(){var e={143:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,i,o=a[0],n=a[1],u=a[2],r=0;if(o.some((function(t){return 0!==e[t]}))){for(s in n)l.o(n,s)&&(l.m[s]=n[s]);if(u)var c=u(l)}for(t&&t(a);r<o.length;r++)i=o[r],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(c)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[998],(function(){return l(3722)}));a=l.O(a)})();
//# sourceMappingURL=app.1a90e85c.js.map